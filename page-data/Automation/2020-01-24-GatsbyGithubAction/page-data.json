{"componentChunkName":"component---src-templates-blog-post-js","path":"/Automation/2020-01-24-GatsbyGithubAction","result":{"data":{"site":{"siteMetadata":{"title":"Minsu's Dev Log","author":"Minsu Kim","siteUrl":"https://alstn2468.github.io","comment":{"disqusShortName":"","utterances":"alstn2468/alstn2468.github.io"},"sponsor":{"buyMeACoffeeId":"eMLdEwU"}}},"markdownRemark":{"id":"1be46257-d6e9-59e0-b3e8-f0420a226c5c","excerpt":"계기 기존에 기반의 을 이용해 블로그를 사용하고 있었다.\njekyll uno라는 테마를 사용하고 있었는데, 테마가 글과 코드의 가독성을 너무 해치는 듯 했다.\n기존부터 관심이 있었던 기반의 로 플랫폼을 옮기기로 결정하게 되었다.\n테마는 이전 부터 보았던 jbee님의 gatsby-starter-bee…","html":"<h2 id=\"계기\" style=\"position:relative;\"><a href=\"#%EA%B3%84%EA%B8%B0\" aria-label=\"계기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>계기</h2>\n<p>기존에 <code class=\"language-text\">Ruby On Rails</code>기반의 <code class=\"language-text\">jekyll</code>을 이용해 <code class=\"language-text\">Github Page</code>블로그를 사용하고 있었다.<br>\n<a href=\"http://joshgerdes.com/jekyll-uno/\">jekyll uno</a>라는 테마를 사용하고 있었는데, 테마가 <strong>글과 코드의 가독성</strong>을 너무 해치는 듯 했다.<br>\n기존부터 관심이 있었던 <code class=\"language-text\">React</code>기반의 <code class=\"language-text\">Gatsby</code>로 플랫폼을 옮기기로 결정하게 되었다.<br>\n테마는 이전 부터 보았던 jbee님의 <a href=\"https://github.com/JaeYeopHan/gatsby-starter-bee\">gatsby-starter-bee</a>를 사용하기로 했다.<br>\n로컬 환경에서 테스트를 마치고 배포를 완료한 후 내 원격 저장소를 보고는 놀랄 수 밖에 없었다.<br></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 307px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 184.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEYUlEQVRIx51WiXKjOBDl/z9sa3drd2o2iRN74guwscFcNqeEoPe1JBuSuGaScdUrhISlpz5etxNlFR1TIBMUXwRd6g6QX0D3Bs7Lek9/fF/Sk1vRLq5JSklNK6gRwjwtWmHQiMmafVaNoNrCaYUk2SkSUlHZdHSuzMkFwO+VxYXnJ6hac5MGz04pvQfDWfsh/f24oUUgaOZVtNjVtD229Lqv6QGs53hfBg09bCuabUua+TU9Yrw6NPSC8WvQ0vTnCNnpnfthINX3GPekVE89xoOdu65pYK1T/e1dSPPsLZzNLqJ/nl1ahYIewWgFNjO31swWGPNz5gFYe9kbVvzNM+ZWx4b8UwsIzQ7nGhsy+n7QpzMrPolZtLBrIwzYxgy+wXVN38be6sbQO8T0+LonDwzXOHELbMIWm/T0Oz+nqBrKLhW8qoCOBNicKzy7K9sJhgnevQ8WTpjktPJPFKaSDqmg01lae5g/DcPX4JzSC3mHhLKiozAfNxx/w8j0PeM7cHJc9xhfsFFHWSkpLzuKsWkEJABfv/8KwyBKab454roKqSf0tTmvXYRDkLSYa/WH93/DzTy3Dcu6pXNRkRQNUCOVOLU6HSqt4PDotbOYeVaaJ7NOLlYY+AYTWzvbIKb/5i6laUaH45H8qEA6NeSBYQimfO0jWK+RaksbUhxenI5zBLoXtYjLkakju84G6kCI1clVfoXxu2sy6MBeQRz+fNjgVEELCIJUU7vQTzCuvwnsjoWhH25i0E2EoZ8k/Weh5esvyNcS8sVC8AwJm/sVBan44MFPhQ0LA0sY7y41OytZ/fBbLB03ONG3F4+WB0HbsKYNexJgacpr9Ul7TmxYNy1xLCL8tKdHmBM/5/GJl/chMgWFKs9zOsUJJYjHLE0oOJXkhq0WUBdsw8yIh4e5bWQyaMvjEDepxpvoXGaBaJuaqqqksqqpKArKi1ZLGmcFZ0jZKJ0Vpxw5DiFJCwlBMaiRVTenxNmFdmEGQehRl6GDcniXq8OdMd1VJKOHcU5LL9JqE0G+WM6nif/rsbXhdcNLWeN6NZ1ZtpDwAYSWc/gA7BOBQySlmGcF8m1+sy0DrLHMhVhnM1xZOv4x0TWFjc5/2OFDL2rIjYxD9vH4ZCewAPNmu5OZ92Kz8e3KuoVoGQodgtK1pOQxUNuKxxWO33mNTcIO4m+b27pNVd6Q6/K/qMteJOnHztTjNZj8CAxLli0OE67Fiz1LVq1r8/Vb7iCifKxDjlJqFAWbakqN3cC1QxhsrRbd21TjOZrK19I7mt7GN12Bhy6Ae5cn1zDRPc0OzDB+wvjBNZ0EC8hiZ7oM0Q03n1v56j8I5Y2pGnsaFgya9jl3ZM5Zw4bfYMMgkVoUWM5/Jk/TCkj35Et7GJ5m24ju82IwFYQ3DH0U+dkqgACYQuRbAWCvBohNLkgc7Nwv7hFzjxBgLXHwvOo/piLEoaQwOaN8mt4mr0yZ5GDlDpbLZWHLJccer/GYS6i6w/B/7lI5FN2s/S4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1\" title=\"1\" src=\"/static/0135108cdf9b962eef4c85a6c8b7832e/4651d/1.png\" srcset=\"/static/0135108cdf9b962eef4c85a6c8b7832e/8a4e8/1.png 150w,\n/static/0135108cdf9b962eef4c85a6c8b7832e/5a46d/1.png 300w,\n/static/0135108cdf9b962eef4c85a6c8b7832e/4651d/1.png 307w\" sizes=\"(max-width: 307px) 100vw, 307px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<h4 id=\"어-내-코드-다-어디갔지\" style=\"position:relative;\"><a href=\"#%EC%96%B4-%EB%82%B4-%EC%BD%94%EB%93%9C-%EB%8B%A4-%EC%96%B4%EB%94%94%EA%B0%94%EC%A7%80\" aria-label=\"어 내 코드 다 어디갔지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어? 내 코드 다 어디갔지?</h4>\n<p><code class=\"language-text\">gatsby build</code>명령어를 사용해 <strong>정적 파일</strong>로 변환 된 후 배포가 되는 방식인 데<br>\n배포가 되어지는 <code class=\"language-text\">master</code>브랜치이기 때문에 기존의 코드가 모두 날아가는 현상이 생겼다.<br>\n<code class=\"language-text\">Github Page</code>문서에 나와있지만 <strong>정적 배포 파일</strong>은 <code class=\"language-text\">master</code>브랜치에 존재해야한다고 써있었다.<br>\n기존의 코드가 날아가지 않고 다른 브랜치를 하나 생성해 코드를 관리하고 싶어 방법을 찾게되었다.<br></p>\n<h2 id=\"github-action의-발견\" style=\"position:relative;\"><a href=\"#github-action%EC%9D%98-%EB%B0%9C%EA%B2%AC\" aria-label=\"github action의 발견 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github Action의 발견</h2>\n<ol>\n<li><code class=\"language-text\">gatsby github page deploy</code></li>\n<li><code class=\"language-text\">another branch</code></li>\n</ol>\n<p>위의 두개의 키워드를 가지고 검색을 하다보니 <code class=\"language-text\">Github Action</code>을 발견하게 되었다.<br></p>\n<h3 id=\"github-action이란\" style=\"position:relative;\"><a href=\"#github-action%EC%9D%B4%EB%9E%80\" aria-label=\"github action이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github Action이란?</h3>\n<p>깃허브 저장소 내에서 코드 프로젝트를 <strong>빌드</strong>, <strong>테스트</strong>, <strong>패키지</strong>, <strong>릴리스</strong><br>\n또는 <strong>배포</strong>하기 위해 설정할 수있는 사용자 지정 <strong>자동화 프로세스</strong>이다.<br></p>\n<h3 id=\"짜여진-github-action-찾아보기\" style=\"position:relative;\"><a href=\"#%EC%A7%9C%EC%97%AC%EC%A7%84-github-action-%EC%B0%BE%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"짜여진 github action 찾아보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>짜여진 Github Action 찾아보기</h3>\n<p>사실 백엔드를 테스트, 배포를 자동화해보자하는 생각은 기존에도 여러번 했었지만<br>\n프론트엔드까지 배포 자동화를 적용할 것이라고는 전혀 생각을 못했었다.<br>\n<code class=\"language-text\">CircleCI</code>에서도 그랬듯이 사람들이 이미 작성해 놓은 <code class=\"language-text\">yml</code>파일을 찾기 시작했다.<br>\n그 결과 내가 필요로하는 2개의 <code class=\"language-text\">Github Action</code>을 찾을 수 있었다.<br></p>\n<ol>\n<li><a href=\"https://github.com/actions/checkout/blob/v1.0.0/action.yml\">checkout</a></li>\n<li><a href=\"https://github.com/maxheld83/ghpages\">ghpages</a></li>\n</ol>\n<p>하나는 브랜치를 변경하도록 도와주고 하나는 배포를 하는 것을 도와주는 <code class=\"language-text\">Action</code>이였다.<br>\n이 두개의 <code class=\"language-text\">Action</code>을 사용해 새로운 <code class=\"language-text\">workflow</code>를 구성하기로 하였다.<br></p>\n<h2 id=\"배포-자동화하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%ED%8F%AC-%EC%9E%90%EB%8F%99%ED%99%94%ED%95%98%EA%B8%B0\" aria-label=\"배포 자동화하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배포 자동화하기</h2>\n<h3 id=\"token-생성-및-키-적용하기\" style=\"position:relative;\"><a href=\"#token-%EC%83%9D%EC%84%B1-%EB%B0%8F-%ED%82%A4-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"token 생성 및 키 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Token 생성 및 키 적용하기</h3>\n<p>내 레파지토리에 직접적으로 접근을 하기위해 Github의 <strong>Access Token</strong>이 필요했다.<br>\n<a href=\"https://github.com/settings/tokens\">여기</a>에서 <code class=\"language-text\">Generate new token</code>을 클릭해 생성할 수 있다.<br></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPUlEQVQoz5WT3U7FIBCE+/5v6IVeGBM9LRSW8ldoGRfo0UZzaiT5skCTyewsHYQQGKcJ0yQghOxVStzGEXKe8d81WOtgzALrHKy1B32/LAu8DwghwIde7zjv27dO36/risEYwsxOZqUgpYDUC0blIbTrKMdnh4m5SQdaPGKMTfRcY1yxpoRBKoL1fMilkwpiOvYZJ/rdny2/vSs8vXzg+ZWz1BmCNkyUT2xfSJNRSrlkqDkRERxn+J9VHpgdiAxnN4OMacH2sA9CglsL/IENG1zcsDe1C4dK6TahEDhcrlVMa80YKHKYyUJz9SwWVhbcL1pOPJnqrjrNKR/tFCz8lEgToxF5kjmn5uo6Bhbc9729t3GcWut5qw72lmt1rmbV3uk9t0fOfgnWP6S2XdfGondBrXvN+dt9+TGRs+AnRIpbT0490ZkAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2\" title=\"2\" src=\"/static/e27ba9abc7f34d9967dcd41720a7ca9b/0a47e/2.png\" srcset=\"/static/e27ba9abc7f34d9967dcd41720a7ca9b/8a4e8/2.png 150w,\n/static/e27ba9abc7f34d9967dcd41720a7ca9b/5a46d/2.png 300w,\n/static/e27ba9abc7f34d9967dcd41720a7ca9b/0a47e/2.png 600w,\n/static/e27ba9abc7f34d9967dcd41720a7ca9b/3c051/2.png 760w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>위와 같이 모든 Repo설정에 대한 권한을 주고 토큰을 생성했다.<br></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsklEQVQoz1XQS2sVMRQH8OjahYJduVIEv4FrcVe6dOMXEEEX3Qou/SqCFKyIVDeConBBuD6oVxGR9kp7e29nkpnJ6yQnj0nMjNLi4Zf/OQROFiGci7bjA85Z04KxOeeU82mm3Kcc+1SxZlWxY9pIqXjFjAJiDBjQoJUulLQGCrSmpDFW2ehCn/9VGqT+JEkl3JzaOcM5syPcp+NAzUGDB61fdG7J/UqEkpXqKWQKqVZJYiJ7LMwru2S4oPZozGGg9neN31ZutsSvR7i7sN+XODs0P+u43+S9Nv/qcqUTAcc3P8mbb2HjHayPNt7DjTfw4ItUpsPICxu48Fx6LlzRCeRdywAN+dGJh7vy7lTf/6jvjcpwZ6ofzeTkmE+Z+EDFrJPgpUJRaFdIzmrrDLk9seSJvvhMn98+dWFbn3uqz2zps1uaPFbXX9vsPYBFi+UXnfOatd4HsvnZrT2Hqy/N5Z3/XNkpl3DtFVx6AbcmmKI3tiwP5cfl4D3hYGs5UqNhwJJUY1OAYxpbje6k0CGWRzDGSLSGVhhWPkG5TrlWukZggehDCH+PH1rJsYUQQyxSSn8A0awSrv3zcbAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3\" title=\"3\" src=\"/static/2a090af8c2d81117f3b0c0128070b7bb/0a47e/3.png\" srcset=\"/static/2a090af8c2d81117f3b0c0128070b7bb/8a4e8/3.png 150w,\n/static/2a090af8c2d81117f3b0c0128070b7bb/5a46d/3.png 300w,\n/static/2a090af8c2d81117f3b0c0128070b7bb/0a47e/3.png 600w,\n/static/2a090af8c2d81117f3b0c0128070b7bb/3c051/3.png 760w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>생성된 토큰을 복사해 사용할 레파지토르의 <code class=\"language-text\">settings</code>의 <code class=\"language-text\">Secrets</code>으로간 후<br>\n<code class=\"language-text\">Add a new secret</code>을 클릭하고 <code class=\"language-text\">GITHUB_API_KEY</code>의 이름으로 키를 적용하자.<br></p>\n<h3 id=\"workflow-생성하기\" style=\"position:relative;\"><a href=\"#workflow-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"workflow 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Workflow 생성하기</h3>\n<p>사용할 레파지토리의 상단 부분의 <code class=\"language-text\">Actions</code>버튼을 클릭해보자.<br></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAnklEQVQI131Niw6CMAzk/z9Ro8QEBZFtbH2yMbDzA7zk2mtz13ZzYBe3wemw6HvNueyFJSOXXMpejW1jYq/TvPg1IbE1Fl1c6MC7BBKBrXpUeI54uWL/gNs9sTALEVsFJEAOLSw+RNFNt9yVUlRVRM3IDGyn+gEeLxrnXA97as8NZqu1/nRtPGw6uk/AlmJBWClOtJ2QJAUiqedfWPoLISDmlaqyttYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4\" title=\"4\" src=\"/static/6675ee34f15174193de81f6d2fa099c3/0a47e/4.png\" srcset=\"/static/6675ee34f15174193de81f6d2fa099c3/8a4e8/4.png 150w,\n/static/6675ee34f15174193de81f6d2fa099c3/5a46d/4.png 300w,\n/static/6675ee34f15174193de81f6d2fa099c3/0a47e/4.png 600w,\n/static/6675ee34f15174193de81f6d2fa099c3/1cfc2/4.png 900w,\n/static/6675ee34f15174193de81f6d2fa099c3/6bfd0/4.png 1011w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>나는 이미 여러번 배포를 해서 이력이 있지만 아마 사용하지 않았다면 비어있을 것이다.<br>\n<code class=\"language-text\">New workflow</code>버튼을 클릭해 새로운 <code class=\"language-text\">workflow</code>를 생성해보자.<br>\n<code class=\"language-text\">Get started with Github Action</code>과 같은 페이지가 뜨는데 스킵하면 된다.<br></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA4ElEQVQY03VQ207EIBDt///GfoGfoE+++W6y+mI0rnTb0qEwMAOeQjQ0upMTAgznMgwrhcn64LZANnD0AeAGHGOSf7FY2nwYzobPr+b56WV5/7C0SpKcs6qKCNZ8o0opWIfT43J6+Lq7f5tn2qDGEeAIeYVDEv0L0dw2Q/kpGF2n2XtONRh64C8EqYMEWs759mAQBQ05MxSNMTHGUjOVGh7fkVLC+RcYyDmHJvads+xk5tjmQe1ZKrmfFs+IXPuOPraM4zUeyZPddueerDfIn5cLM/fk0YYkcnBWXYmkXn4DxEbT4axrdFMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"5\" title=\"5\" src=\"/static/36f91e0ce007ab516fcd06cc2bbfd314/0a47e/5.png\" srcset=\"/static/36f91e0ce007ab516fcd06cc2bbfd314/8a4e8/5.png 150w,\n/static/36f91e0ce007ab516fcd06cc2bbfd314/5a46d/5.png 300w,\n/static/36f91e0ce007ab516fcd06cc2bbfd314/0a47e/5.png 600w,\n/static/36f91e0ce007ab516fcd06cc2bbfd314/1cfc2/5.png 900w,\n/static/36f91e0ce007ab516fcd06cc2bbfd314/c1b63/5.png 1200w,\n/static/36f91e0ce007ab516fcd06cc2bbfd314/09b15/5.png 1704w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>아래의 <code class=\"language-text\">yml</code>코드를 붙여넣기 한 후 저장하고 레파지토리에 <code class=\"language-text\">pull</code>을 해주자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">on:\n  push:\n    branches:\n      - gh-pages\nname: build gatsby\njobs:\n  build_gatsby:\n    name: build\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v1\n\n      - name: yarn install\n        run: yarn install\n\n      - name: gatsby build\n        env:\n          GH_API_KEY: ${{ secrets.GITHUB_API_KEY }}\n        run: yarn build\n\n      - name: deploy\n        uses: maxheld83/ghpages@v0.2.1\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          GH_PAT: ${{ secrets.GITHUB_API_KEY }}\n          BUILD_DIR: 'public/'</code></pre></div>\n<p>소개했던 <code class=\"language-text\">checkout</code>을 이용해 브랜치를 변경하고 <code class=\"language-text\">yarn install</code>명령어로 패키지 설치 후 빌드<br>\n<code class=\"language-text\">ghpages</code>를 이용해 <code class=\"language-text\">deploy</code>를 하게 된다. 자세한 로직은 아직 이해하지 못해 보고있는 중이다.<br></p>\n<h3 id=\"변경사항-적용하기\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EA%B2%BD%EC%82%AC%ED%95%AD-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"변경사항 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변경사항 적용하기</h3>\n<p><code class=\"language-text\">workflow</code>를 생성하고 <code class=\"language-text\">pull</code>을 하면 <code class=\"language-text\">.github</code>폴더안에 <code class=\"language-text\">yml</code>파일이 생성되었을 것이다.<br>\n이 상태에서 블로그에 관한것을 변경한 후 <code class=\"language-text\">push</code>하게되면 자동으로 배포가된다.<br></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoUlEQVQ4y62SXUobURiGzyJKL+xFWo2Jmh8nSsVii1h/LlyDO1BJfwwqbsAddAOFQt1AQYpgKbVIFUTwRrBNokQ0TmYyk5OZiT6dMzZhKtLQ2g8eOPNdPLzvnCPODIdzo07xXAbolovnujjSxnVcXK/RFsf1WgjbltRkHVs6VC2JWa2hX5S5KBUxDQO9Yvo7C9O0qBjV4Fwxrnd6xcCya8i6EzgU4nv5lHy+RL5Q9BcOnnfJXUZ4rqRum9Co+Z+NYHlSOOJVbpmFxRVySyvMv1xg7sVr5rLtER92Snzc1/l0KNk4MNn6ccWbtU0i3X30pAbo7Elxr+OhT4T7Dx61ReTWSmTfnTD79tinQPZ9mZnVdeKpDIPDT32eMTA0Qv/gMLGERjyZ+YV2KwLUP1NctSrv7X4jls7wZHScsclpRp9PkdAe0+WnjfamA9T5NoR0PJqom1bzeWub7kR/kDCpDRGJ9tIZT/4maopvIsJvSF2/mi9ft4mlNEbGJoKqTcGfRC1h+IGGhdG+dFDzZtV/FiqJqhlOd7eEoYr/JeHfipr8BMNGo+62KDuoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"6\" title=\"6\" src=\"/static/fcf4f3b0432850ea872d232c0c72655a/0a47e/6.png\" srcset=\"/static/fcf4f3b0432850ea872d232c0c72655a/8a4e8/6.png 150w,\n/static/fcf4f3b0432850ea872d232c0c72655a/5a46d/6.png 300w,\n/static/fcf4f3b0432850ea872d232c0c72655a/0a47e/6.png 600w,\n/static/fcf4f3b0432850ea872d232c0c72655a/1cfc2/6.png 900w,\n/static/fcf4f3b0432850ea872d232c0c72655a/bb2fd/6.png 1058w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>별 문제가 없다면 위의 사진과 같이 <code class=\"language-text\">deploy</code>단계 까지 완료가 될 것이다.<br>\n<code class=\"language-text\">deploy</code>단계까지 오류가 없이 잘 진행되었다면 배포가 완료된 것이다.<br>\n물론 <code class=\"language-text\">master</code>브랜치에는 정적인 파일만 존재하고 <code class=\"language-text\">gh-pages</code>브랜치에 기존 코드가 있다.<br>\n<code class=\"language-text\">gh-pages</code>브랜치에서 작업을하고 그대로 <code class=\"language-text\">gh-pages</code>브랜치에 <code class=\"language-text\">push</code>하면 배포가 되는 것이다.<br></p>\n<h2 id=\"출처\" style=\"position:relative;\"><a href=\"#%EC%B6%9C%EC%B2%98\" aria-label=\"출처 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>출처</h2>\n<ul>\n<li><a href=\"https://github.com/actions/checkout\">actions/checkout</a></li>\n<li><a href=\"https://github.com/maxheld83/ghpages\">maxheld83/ghpages</a></li>\n<li><a href=\"https://github.com/JaeYeopHan/gatsby-starter-bee\">JaeYeopHan/gatsby-starter-bee</a></li>\n<li><a href=\"https://blog.joostory.net/587\">blog.joostory.net</a></li>\n</ul>","frontmatter":{"title":"Github Action으로 Gatsby 블로그 배포 자동화하기","date":"January 23, 2020","thumbnail":null}}},"pageContext":{"slug":"/Automation/2020-01-24-GatsbyGithubAction/","previous":{"fields":{"slug":"/Node/2020-01-13-NodeOracleBugFix/"},"frontmatter":{"title":"node-oracledb 설치 오류 해결","category":"NodeJS","draft":false}},"next":{"fields":{"slug":"/Algorithms/2020-01-28-BOJ-14915/"},"frontmatter":{"title":"BOJ 14915 진수변환기","category":"Algorithms","draft":false}}}},"staticQueryHashes":["3001444076","3128451518"]}