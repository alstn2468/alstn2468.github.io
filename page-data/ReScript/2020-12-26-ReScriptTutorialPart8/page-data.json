{"componentChunkName":"component---src-templates-blog-post-js","path":"/ReScript/2020-12-26-ReScriptTutorialPart8","result":{"data":{"site":{"siteMetadata":{"title":"Minsu's Dev Log","author":"Minsu Kim","siteUrl":"https://alstn2468.github.io","comment":{"disqusShortName":"","utterances":"alstn2468/alstn2468.github.io"},"sponsor":{"buyMeACoffeeId":"eMLdEwU"}}},"markdownRemark":{"id":"cecc4a49-1166-53f7-b28e-b9b3e6228f8f","excerpt":"본 포스트는 ReScript 공식문서를 스터디하며 정리한 포스트 입니다.\n포스트를 작성하며 작성한 코드는 여기에서 확인할 수 있습니다. Variant 지금까지 살펴본 대부분의 ReScript의 자료구조는 익숙할 수 있다. 이 절에서는 매우 중요하면서도 익숙하지 않은 자료구조인 Variant를 소개한다. 대부분의 언어에서 대부분의 자료구조는 “이것 and 저것”에 관한 것이다. Variant는 우리가 “이것 or 저것”을 표현할 수 있게 해준다. 는 , , 의 Variant…","html":"<p>본 포스트는 <a href=\"https://rescript-lang.org/docs/latest/\">ReScript 공식문서</a>를 스터디하며 정리한 포스트 입니다.<br/>\n포스트를 작성하며 작성한 코드는 <a href=\"https://github.com/alstn2468/ReScript_Tutorial\">여기</a>에서 확인할 수 있습니다.</p>\n<h2 id=\"variant\" style=\"position:relative;\"><a href=\"#variant\" aria-label=\"variant permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Variant</h2>\n<p>지금까지 살펴본 대부분의 ReScript의 자료구조는 익숙할 수 있다. 이 절에서는 매우 중요하면서도 익숙하지 않은 자료구조인 Variant를 소개한다.</p>\n<p>대부분의 언어에서 대부분의 자료구조는 “이것 <strong>and</strong> 저것”에 관한 것이다. Variant는 우리가 “이것 <strong>or</strong> 저것”을 표현할 수 있게 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> myResponse <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Yes</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">No</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">PrettyMuch</span>\n\n<span class=\"token keyword\">let</span> areYouCrushingIt <span class=\"token operator\">=</span> <span class=\"token constructor\">Yes</span></code></pre></div>\n<p><code class=\"language-text\">myResponse</code>는 <code class=\"language-text\">Yes</code>, <code class=\"language-text\">No</code>, <code class=\"language-text\">PrettyMuch</code>의 Variant 타입이며, 이를 “Variant 생성자”(또는 “Variant 태그”)라고 합니다. <code class=\"language-text\">|</code>는 각 생성자를 분리한다.</p>\n<blockquote>\n<p>참고: Variant의 생성자는 대문자로 작성해야한다. (자세한 내용은 쓰여있지 않지만 첫글자는 필수적으로 대문자임을 의미하는 것 같다.)</p>\n</blockquote>\n<h3 id=\"명시적-타입-정의가-포함하는-variant\" style=\"position:relative;\"><a href=\"#%EB%AA%85%EC%8B%9C%EC%A0%81-%ED%83%80%EC%9E%85-%EC%A0%95%EC%9D%98%EA%B0%80-%ED%8F%AC%ED%95%A8%ED%95%98%EB%8A%94-variant\" aria-label=\"명시적 타입 정의가 포함하는 variant permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>명시적 타입 정의가 포함하는 Variant</h3>\n<p>사용 중인 Variant 모델이 다른 파일에 있는 경우 <a href=\"https://rescript-lang.org/docs/manual/latest/record#record-needs-an-explicit-definition\">Record</a>에서 사용하는 것과 같은 범위로 가져온다.</p>\n<ul>\n<li><code class=\"language-text\">Zoo.res</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> animal <span class=\"token operator\">=</span> <span class=\"token constructor\">Dog</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Cat</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Bird</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">Example.res</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">let</span> pet<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Zoo</span><span class=\"token punctuation\">.</span>animal <span class=\"token operator\">=</span> <span class=\"token constructor\">Dog</span> <span class=\"token comment\">// 선호되는 방식</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token keyword\">let</span> pet2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Zoo</span><span class=\"token punctuation\">.</span><span class=\"token constructor\">Dog</span></code></pre></div>\n<h3 id=\"생성자-인자\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EC%84%B1%EC%9E%90-%EC%9D%B8%EC%9E%90\" aria-label=\"생성자 인자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생성자 인자</h3>\n<p>Variant 생성자는 <code class=\"language-text\">,</code>로 구분된 추가 데이터를 저장할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> account <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">None</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Instagram</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Facebook</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">,</span> int<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">Instagram</code>은 <code class=\"language-text\">string</code>타입 값을 가질 수 있으며  <code class=\"language-text\">Facebook</code>은 <code class=\"language-text\">string</code>타입과 <code class=\"language-text\">int</code>타입 값을 가질 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">let</span> myAccount <span class=\"token operator\">=</span> <span class=\"token constructor\">Facebook</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Josh\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> friendAccount <span class=\"token operator\">=</span> <span class=\"token constructor\">Instagram</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Jenny\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"레이블된-variant-인자\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%9D%B4%EB%B8%94%EB%90%9C-variant-%EC%9D%B8%EC%9E%90\" aria-label=\"레이블된 variant 인자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레이블된 Variant 인자</h3>\n<p>Variant의 인자에 여러 개의 필드가 있는 경우 Record와 유사한 구문을 사용하여 읽기 쉽도록 레이블을 지정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> user <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Number</span><span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> me <span class=\"token operator\">=</span> <span class=\"token constructor\">Id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Joe\"</span><span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">:</span> <span class=\"token string\">\"123\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이를 기술적으로 “인라인 레코드”라고 하며, Variat생성자 내에서만 허용됩니다. Record타입 선언은 ReScript의 다른 곳에서는 인라인으로 연결할 수 없다.</p>\n<p>물론, 일반 Record타입도 Variant모델에 넣을 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> u <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> user <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Number</span><span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Id</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> me <span class=\"token operator\">=</span> <span class=\"token constructor\">Id</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Joe\"</span><span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">:</span> <span class=\"token string\">\"123\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>결과물은 앞의 예시보다 약간 못생기고 성능이 떨어진다.</p>\n<h3 id=\"variant의-패턴-매칭\" style=\"position:relative;\"><a href=\"#variant%EC%9D%98-%ED%8C%A8%ED%84%B4-%EB%A7%A4%EC%B9%AD\" aria-label=\"variant의 패턴 매칭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Variant의 패턴 매칭</h3>\n<p>이후에 <a href=\"https://rescript-lang.org/docs/manual/latest/pattern-matching-destructuring\">패턴 매칭/비구조화</a> 섹션을 참고하면 된다.</p>\n<h3 id=\"javascript-출력\" style=\"position:relative;\"><a href=\"#javascript-%EC%B6%9C%EB%A0%A5\" aria-label=\"javascript 출력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScript 출력</h3>\n<p>Variant는 타입 선언에 따라 가능한 JavaScript 출력 3개로 컴파일된다.</p>\n<ul>\n<li>Variant가 인자가 없는 생성자인 경우 <code class=\"language-text\">number</code>로 컴파일된다.</li>\n<li>인자가 있는 생성자일 경우, 첫 번째 인자의 경우 <code class=\"language-text\">_0</code>필드와 두 번째 인자의 경우 <code class=\"language-text\">_1</code>필드가 있는 객체로 컴파일된다.</li>\n<li>위의 예외는 타입 선언에 인자가 있는 단일 생성자만 포함된 Variant다. 이 경우 생성자는 <code class=\"language-text\">TAG</code> 필드가 없는 객체로 컴파일된다.</li>\n<li>레이블이 지정된 Variant 인자는 <code class=\"language-text\">_0</code>, <code class=\"language-text\">_1</code>등 대신 레이블 이름을 가진 객체로 컴파일된다. 객체에는 이전 규칙에 따라 <code class=\"language-text\">TAG</code>필드가 있거나 없을 수 있다.</li>\n<li>ReScript 코드 (인자가 없는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> greeting <span class=\"token operator\">=</span> <span class=\"token constructor\">Hello</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Goodbye</span>\n<span class=\"token keyword\">let</span> g1 <span class=\"token operator\">=</span> <span class=\"token constructor\">Hello</span>\n<span class=\"token keyword\">let</span> g2 <span class=\"token operator\">=</span> <span class=\"token constructor\">Goodbye</span></code></pre></div>\n<ul>\n<li>JavaScript 코드 (인자가 없는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> g1 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Hello */</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> g2 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Goodbye */</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ReScript 코드 (하나의 인자가 있는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> outcome <span class=\"token operator\">=</span> <span class=\"token constructor\">Good</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Error</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> o1 <span class=\"token operator\">=</span> <span class=\"token constructor\">Good</span>\n<span class=\"token keyword\">let</span> o2 <span class=\"token operator\">=</span> <span class=\"token constructor\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"oops!\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>JavaScript 코드 (하나의 인자가 있는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> o1 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Good */</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> o2 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Error */</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">_0</span><span class=\"token operator\">:</span> <span class=\"token string\">\"oops!\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ReScript 코드 (하나 또는 두개의 인자가 있는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> family <span class=\"token operator\">=</span> <span class=\"token constructor\">Child</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Mom</span><span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Dad</span> <span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> f1 <span class=\"token operator\">=</span> <span class=\"token constructor\">Child</span>\n<span class=\"token keyword\">let</span> f2 <span class=\"token operator\">=</span> <span class=\"token constructor\">Mom</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jane\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> f3 <span class=\"token operator\">=</span> <span class=\"token constructor\">Dad</span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>JavaScript 코드 (하나 또는 두개의 인자가 있는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> f1 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Child */</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> f2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">TAG</span><span class=\"token operator\">:</span> <span class=\"token comment\">/* Mom */</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">_0</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">_1</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> f3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">TAG</span><span class=\"token operator\">:</span> <span class=\"token comment\">/* Dad */</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">_0</span><span class=\"token operator\">:</span> <span class=\"token number\">32</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ReScript 코드 (레이블이 지정된 인자가 있는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> person <span class=\"token operator\">=</span> <span class=\"token constructor\">Teacher</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>gpa<span class=\"token punctuation\">:</span> float<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> p1 <span class=\"token operator\">=</span> <span class=\"token constructor\">Teacher</span>\n<span class=\"token keyword\">let</span> p2 <span class=\"token operator\">=</span> <span class=\"token constructor\">Student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>gpa<span class=\"token punctuation\">:</span> <span class=\"token number\">99.5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>JavaScript 코드 (레이블이 지정된 인자가 있는 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> p1 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Teacher */</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> p2 <span class=\"token operator\">=</span> <span class=\"token comment\">/* Student */</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">gpa</span><span class=\"token operator\">:</span> <span class=\"token number\">99.5</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ReScript 코드 (여러 형식이 결합된 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> s <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>score<span class=\"token punctuation\">:</span> float<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> adventurer <span class=\"token operator\">=</span> <span class=\"token constructor\">Warrior</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Wizard</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> a1 <span class=\"token operator\">=</span> <span class=\"token constructor\">Warrior</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>score<span class=\"token punctuation\">:</span> <span class=\"token number\">10.5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> a2 <span class=\"token operator\">=</span> <span class=\"token constructor\">Wizard</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Joe\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>JavaScript 코드 (여러 형식이 결합된 경우)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> a1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">TAG</span><span class=\"token operator\">:</span> <span class=\"token comment\">/* Warrior */</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">_0</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">score</span><span class=\"token operator\">:</span> <span class=\"token number\">10.5</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> a2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">TAG</span><span class=\"token operator\">:</span> <span class=\"token comment\">/* Wizard */</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">_0</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joe\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"팁--트릭\" style=\"position:relative;\"><a href=\"#%ED%8C%81--%ED%8A%B8%EB%A6%AD\" aria-label=\"팁  트릭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>팁 &#x26; 트릭</h3>\n<p>2개의 인자를 가진 생성자와 단일 튜플 인자를 가진 생성자를 혼동하지 않도록 주의해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> account <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Facebook</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">,</span> int<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 두개의 인자</span>\n<span class=\"token keyword\">type</span> account2 <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">Instagram</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">,</span> int<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 한개의 인자 튜플</span></code></pre></div>\n<h4 id=\"variant는-생성자를-필수적으로-갖는다\" style=\"position:relative;\"><a href=\"#variant%EB%8A%94-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A5%BC-%ED%95%84%EC%88%98%EC%A0%81%EC%9C%BC%EB%A1%9C-%EA%B0%96%EB%8A%94%EB%8B%A4\" aria-label=\"variant는 생성자를 필수적으로 갖는다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Variant는 생성자를 필수적으로 갖는다.</h4>\n<p>타입이 없는 언어를 사용하다 왔을 경우 <code class=\"language-text\">type myType = int | string</code>와 같이 시도할 수 있을 것이다. 이것은 ReScript에서는 불가능하다. 이러한 타입을 사용하기 위해서는 <code class=\"language-text\">type myType = Int(int) | String(string)</code>와 같이 각각 생성자를 전달해야 한다. <code class=\"language-text\">type myType = int | string</code>는 보기에 깔끔해 보이지만 많은 문제를 발생시킨다.</p>\n<h4 id=\"javascript-인터럽트\" style=\"position:relative;\"><a href=\"#javascript-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8\" aria-label=\"javascript 인터럽트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScript 인터럽트</h4>\n<p>이 섹션에서는 JavaScript 인터럽트에 대한 지식이 있다는 것을 가정한다. JavaScript의 함수를 감싸는데 데 Variant를 사용할 마음이 아직 느껴지지 않았다면 이 섹션을 건너뛰어도 된다.</p>\n<p>많은 JavaScript 라이브러리는 많은 타입의 인자를 허용할 수 있는 함수를 사용한다. 이런 경우, 모델을 Variant 모델로 만드는 것은 매우 유혹적이다. 예를 들어 숫자나 문자열을 사용하는 <code class=\"language-text\">myLibrary.draw</code> JavaScript 함수가 있다고 가정하고 아래와 같이 묶고 싶을 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token comment\">// reserved for internal usage</span>\n@bs<span class=\"token punctuation\">.</span><span class=\"token keyword\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myLibrary\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> draw <span class=\"token punctuation\">:</span> <span class=\"token operator\">'</span>a <span class=\"token operator\">=></span> unit <span class=\"token operator\">=</span> <span class=\"token string\">\"draw\"</span>\n\n<span class=\"token keyword\">type</span> animal <span class=\"token operator\">=</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">MyFloat</span><span class=\"token punctuation\">(</span>float<span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">MyString</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> betterDraw <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">switch</span> animal <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">MyFloat</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> draw<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">|</span> <span class=\"token constructor\">MyString</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> draw<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\nbetterDraw<span class=\"token punctuation\">(</span><span class=\"token constructor\">MyFloat</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이렇게 하면 문제가 추가적으로 발생할 수 있으므로 그렇게 하는 것은 좋지 않다. 또는 둘 다 동일한 JavaScript 호출로 컴파일하는 두 개의 <code class=\"language-text\">external</code> 항목을 정의할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\">@bs<span class=\"token punctuation\">.</span><span class=\"token keyword\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myLibrary\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> drawFloat<span class=\"token punctuation\">:</span> float <span class=\"token operator\">=></span> unit <span class=\"token operator\">=</span> <span class=\"token string\">\"draw\"</span>\n@bs<span class=\"token punctuation\">.</span><span class=\"token keyword\">module</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myLibrary\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">external</span> drawString<span class=\"token punctuation\">:</span> string <span class=\"token operator\">=></span> unit <span class=\"token operator\">=</span> <span class=\"token string\">\"draw\"</span></code></pre></div>\n<p>ReScript는 또한 이를 위한 <a href=\"https://rescript-lang.org/docs/manual/latest/bind-to-js-function#modeling-polymorphic-function\">몇 가지 다른 방법</a>을 제공합니다.</p>\n<h3 id=\"필드의-이름으로-variant의-타입을-찾을-수-있다\" style=\"position:relative;\"><a href=\"#%ED%95%84%EB%93%9C%EC%9D%98-%EC%9D%B4%EB%A6%84%EC%9C%BC%EB%A1%9C-variant%EC%9D%98-%ED%83%80%EC%9E%85%EC%9D%84-%EC%B0%BE%EC%9D%84-%EC%88%98-%EC%9E%88%EB%8B%A4\" aria-label=\"필드의 이름으로 variant의 타입을 찾을 수 있다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>필드의 이름으로 Variant의 타입을 찾을 수 있다.</h3>\n<p>이전의 Record 섹션을 참조할 수 있다. Variant 또한 동일하다. 함수는 두 Variant가 공유하는 임의의 생성자를 허용할 수 없다. 이런 기능들이 존재하며 다형성 변형이라고 불린다.</p>\n<h3 id=\"variant타입의-설계-결정\" style=\"position:relative;\"><a href=\"#variant%ED%83%80%EC%9E%85%EC%9D%98-%EC%84%A4%EA%B3%84-%EA%B2%B0%EC%A0%95\" aria-label=\"variant타입의 설계 결정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Variant타입의 설계 결정</h3>\n<p>다양한 형태(다형변형, 개방변형, GADT 등)의 변형은 ReScript와 같은 타입 시스템의 특징일 가능성이 높다. 예를 들어, 앞에서 언급한 옵션 변형은 다른 언어에서 버그의 주요 원천인 null 가능한 유형의 필요성을 없앤다. 철학적으로 말하면, 문제는 많은 가능한 분기/조건으로 구성되어 있다. 이러한 조건들을 잘못 다루는 것은 우리가 버그라고 부르는 것의 대부분이다. <strong>타입 시스템은 마법처럼 버그를 제거하는 것이 아니라 처리되지 않은 상태를 지적하고 이를 커버하도록 요청한다.</strong> “이것 또는 저것”을 정확하게 모형화하는 능력은 매우 중요하다.</p>\n<p>예를 들어, 어떤 사람들은 어떻게 타입 시스템이 잘못 포맷된 JSON 데이터가 자신의 프로그램으로 전파되는 것을 안전하게 제거할 수 있는지 궁금해한다. 그러나 파서가 <code class=\"language-text\">None | Some(actualData)</code> 옵션 타입을 반환하면 나중에 호출부에서 <code class=\"language-text\">None</code> 케이스를 명시적으로 처리해야 한다.</p>\n<p>성능 면에서 Variant는 잠재적으로 프로그램 처리의 속도를 엄청나게 높일 수 있다. 다음은 JavaScript 코드다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token string\">'dog'</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">===</span> <span class=\"token string\">'dog'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">===</span> <span class=\"token string\">'cat'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">===</span> <span class=\"token string\">'bird'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 코드는 시간복잡도가 O(n)인 조건 확인 분기가 있다. 이것을 ReScript의 Variant의 사용과 비교할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"reason\"><pre class=\"language-reason\"><code class=\"language-reason\"><span class=\"token keyword\">type</span> animal <span class=\"token operator\">=</span> <span class=\"token constructor\">Dog</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Cat</span> <span class=\"token operator\">|</span> <span class=\"token constructor\">Bird</span>\n<span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token constructor\">Dog</span>\n<span class=\"token keyword\">switch</span> data <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">|</span> <span class=\"token constructor\">Dog</span> <span class=\"token operator\">=></span> <span class=\"token class-name\">Js</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span><span class=\"token string\">\"Wof\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span> <span class=\"token constructor\">Cat</span> <span class=\"token operator\">=></span> <span class=\"token class-name\">Js</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span><span class=\"token string\">\"Meow\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span> <span class=\"token constructor\">Bird</span> <span class=\"token operator\">=></span> <span class=\"token class-name\">Js</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span><span class=\"token string\">\"Kashiiin\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>컴파일러가 Variant를 보고, 개념적으로 그들을 <code class=\"language-text\">type animal = 0 | 1 | 2</code>로 바꾼다. 그 후 <code class=\"language-text\">switch</code>를 일정한 시간 O(1)이 소요되는 점프 테이블로 컴파일한다.</p>","frontmatter":{"title":"ReScript 공식문서로 ReScript 훑어보기 (8)","date":"December 26, 2020","thumbnail":null}}},"pageContext":{"slug":"/ReScript/2020-12-26-ReScriptTutorialPart8/","previous":{"fields":{"slug":"/ReScript/2020-12-23-ReScriptTutorialPart7/"},"frontmatter":{"title":"ReScript 공식문서로 ReScript 훑어보기 (7)","category":"ReScript","draft":false}},"next":{"fields":{"slug":"/ReScript/2020-12-28-ReScriptTutorialPart9/"},"frontmatter":{"title":"ReScript 공식문서로 ReScript 훑어보기 (9)","category":"ReScript","draft":false}}}},"staticQueryHashes":["3001444076","3128451518"]}