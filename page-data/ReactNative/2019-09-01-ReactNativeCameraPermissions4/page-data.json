{"componentChunkName":"component---src-templates-blog-post-js","path":"/ReactNative/2019-09-01-ReactNativeCameraPermissions4","result":{"data":{"site":{"siteMetadata":{"title":"Minsu's Dev Log","author":"Minsu Kim","siteUrl":"https://alstn2468.github.io","comment":{"disqusShortName":"","utterances":"alstn2468/alstn2468.github.io"},"sponsor":{"buyMeACoffeeId":"eMLdEwU"}}},"markdownRemark":{"id":"64700be5-88b9-54b3-b6c9-d8fcbb02cdb7","excerpt":"해당 포스트는 Nomad Coder의 초보를 위한 RN강의를 정리한 내용입니다. 지난 포스트 Review [이전 포스트로 이동] 카메라 타입(전방/후방) 설정 카메라 타입 로 관리 카메라 타입 변경 버튼 추가 카메라 타입 변경 함수 작성 지난 포스트에는 카메라 타입(전방/후방)을 변경하는 것까지 진행했습니다.\n이번 포스트에서는 얼굴을 인식하고 웃는 얼굴일 경우 사진을 찍도록 해보겠습니다. 13. 카메라로 얼굴 인식 하기 Expo…","html":"<p>해당 포스트는 <a href=\"https://academy.nomadcoders.co/courses/category/KR\">Nomad Coder</a>의 초보를 위한 RN강의를 정리한 내용입니다.<br></p>\n<h2 id=\"지난-포스트-review\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EB%82%9C-%ED%8F%AC%EC%8A%A4%ED%8A%B8-review\" aria-label=\"지난 포스트 review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지난 포스트 Review</h2>\n<p><a href=\"https://alstn2468.github.io/2019/ReactNativeCameraPermissions3/\">[이전 포스트로 이동]</a></p>\n<ol>\n<li>카메라 <strong>타입</strong>(전방/후방) <strong>설정</strong></li>\n<li>카메라 타입 <code class=\"language-text\">state</code>로 관리</li>\n<li>카메라 타입 변경 <strong>버튼</strong> 추가</li>\n<li>카메라 타입 변경 <strong>함수</strong> 작성</li>\n</ol>\n<p>지난 포스트에는 카메라 <strong>타입</strong>(전방/후방)을 <strong>변경</strong>하는 것까지 진행했습니다.<br>\n이번 포스트에서는 얼굴을 인식하고 <strong>웃는 얼굴</strong>일 경우 <strong>사진</strong>을 찍도록 해보겠습니다.<br></p>\n<h2 id=\"13-카메라로-얼굴-인식-하기\" style=\"position:relative;\"><a href=\"#13-%EC%B9%B4%EB%A9%94%EB%9D%BC%EB%A1%9C-%EC%96%BC%EA%B5%B4-%EC%9D%B8%EC%8B%9D-%ED%95%98%EA%B8%B0\" aria-label=\"13 카메라로 얼굴 인식 하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. 카메라로 얼굴 인식 하기</h2>\n<p><a href=\"https://docs.expo.io/versions/v34.0.0/sdk/camera/\">Expo 공식 문서</a>를 확인해 보면 <code class=\"language-text\">onFacesDetected</code>속성이 존재한다.<br>\n일단 아래와 같이 <strong>함수</strong>를 <strong>구현</strong>하고 해당 속성에 전달해 테스트 해보자.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>Camera\n    style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> width <span class=\"token operator\">-</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> height <span class=\"token operator\">/</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hidden\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    type<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>cameraType<span class=\"token punctuation\">}</span>\n    onFacesDetected<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onFacesDetected<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token function-variable function\">onFacesDetected</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">faces</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>faces<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"작동-테스트\" style=\"position:relative;\"><a href=\"#%EC%9E%91%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"작동 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작동 테스트</h3>\n<p>아래와 같이 얼굴을 잘 찾는 것을 확인할 수 있다.<br></p>\n<p><img src=\"/df6ac1c6860a44dbec466f993200cd95/5.gif\" width=\"280\" height=\"auto\" alt=\"아직 안만듬\"><br/></p>\n<p>얼굴을 <strong>찾지 못하면</strong> 아래와 같이 빈 <code class=\"language-text\">array</code>가 반환된다.<br></p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 368px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABYElEQVQoz5VSyVLCUBDkR6zCXUFCQlYICUlIyGIkCi54sPz/r2hej/WqQD3oYTJVs/R0d17vYfcBNy0RNx3CssVsdY9rZ4Ygb3A5Cf4cF5YvuZe2G1mO6w6TOIcRJjg3PZjzTDIHz8Yu+oYj+VRlBuvs6xkN2jsZmDCjDP6yxrRoBJQHvKySuLKncJKVKLCipcwxuMwc5PUxQ03ZmCVI2ieRHVVrOOkKN26IgTeHpY5E9RrDIBbg4vFVduykEIvGYSpMBZAyJgvFSrFzFYi9KOBmpbBksEaWAz9C3j3j1gvRH9myTBDuH0nmhz/BipfI1luRV27eQG8p/266kD7ZscY+dzTIj5/CKwTj4DCIxCdHSaGv7JHZl2+VgPKIr3wj60NmGlgk0ysuVdsduvdPYUJPCcohepR3LxJUYaqjPPwdTABHapGgOvSz0M9BPw9d171DqUcMKZdA/3nEvzHTsQfNZEb+cN5dmAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"아직 안만듬\" title=\"아직 안만듬\" src=\"/static/13497b12d8bf9922a31d618bf05ddd61/2b727/6.png\" srcset=\"/static/13497b12d8bf9922a31d618bf05ddd61/8a4e8/6.png 150w,\n/static/13497b12d8bf9922a31d618bf05ddd61/5a46d/6.png 300w,\n/static/13497b12d8bf9922a31d618bf05ddd61/2b727/6.png 368w\" sizes=\"(max-width: 368px) 100vw, 368px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span><br/></p>\n<h2 id=\"14-웃는-얼굴-분류하기-1\" style=\"position:relative;\"><a href=\"#14-%EC%9B%83%EB%8A%94-%EC%96%BC%EA%B5%B4-%EB%B6%84%EB%A5%98%ED%95%98%EA%B8%B0-1\" aria-label=\"14 웃는 얼굴 분류하기 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. 웃는 얼굴 분류하기 (1)</h2>\n<p><code class=\"language-text\">expo</code>의 <code class=\"language-text\">FaceDetector</code>모듈을 추가하고<br>\n<code class=\"language-text\">Camera</code> 컴포넌트에 <code class=\"language-text\">faceDetectionClassifications</code>속성을 <code class=\"language-text\">all</code>로 지정해준다.<br>\n다음으로 <code class=\"language-text\">faceDetectorSettings</code>속성을 작성한다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> FaceDetector <span class=\"token keyword\">from</span> <span class=\"token string\">'expo-face-detector'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token operator\">&lt;</span>Camera\n    style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> width <span class=\"token operator\">-</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> height <span class=\"token operator\">/</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hidden\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    type<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>cameraType<span class=\"token punctuation\">}</span>\n    onFacesDetected<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onFacesDetected<span class=\"token punctuation\">}</span>\n    faceDetectionClassifications<span class=\"token operator\">=</span><span class=\"token string\">\"all\"</span>\n    faceDetectorSettings<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">detectLandmarks</span><span class=\"token operator\">:</span> FaceDetector<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Landmarks<span class=\"token punctuation\">.</span>all\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"작동-테스트-1\" style=\"position:relative;\"><a href=\"#%EC%9E%91%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8-1\" aria-label=\"작동 테스트 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작동 테스트</h3>\n<p>얼굴의 모든 <strong>부분</strong>의 <strong>좌표</strong>를 찾는 것을 확인할 수 있다.<br></p>\n<p><img src=\"/5da03708192edeaab08a182796267176/7.gif\" width=\"280\" height=\"auto\" alt=\"아직 안만듬\"><br/></p>\n<h2 id=\"15-웃는-얼굴-분류하기-2\" style=\"position:relative;\"><a href=\"#15-%EC%9B%83%EB%8A%94-%EC%96%BC%EA%B5%B4-%EB%B6%84%EB%A5%98%ED%95%98%EA%B8%B0-2\" aria-label=\"15 웃는 얼굴 분류하기 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>15. 웃는 얼굴 분류하기 (2)</h2>\n<p><code class=\"language-text\">faceDetectorSettings</code>에 <code class=\"language-text\">runClassifications</code>를 추가한다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>Camera\n    <span class=\"token operator\">...</span>\n    faceDetectionClassifications<span class=\"token operator\">=</span><span class=\"token string\">\"all\"</span>\n    faceDetectorSettings<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">detectLandmarks</span><span class=\"token operator\">:</span>\n            FaceDetector<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Landmarks<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">runClassifications</span><span class=\"token operator\">:</span>\n            FaceDetector<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Classifications<span class=\"token punctuation\">.</span>all\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"작동-테스트-2\" style=\"position:relative;\"><a href=\"#%EC%9E%91%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8-2\" aria-label=\"작동 테스트 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작동 테스트</h3>\n<p>이전과 같은 이미지를 가지고 테스트하여 콘솔을 확인한 결과<br>\n<code class=\"language-text\">smilingProbability</code>라는 <strong>웃는 얼굴일 가능성</strong>을 확인할 수 있는 값이 생겼다.<br></p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADyklEQVQ4y22T+09bZRjHT6C02Bst7WBcJi2lJVCubemVllJgG8KQgluX6AKFltsGuMjcAnId9zKRRbItmzHbXJZ5SZy/GBODMS7GZYvXn0yMJv7s//Dxbc2MS/zhe57znvO+n/N8n+c5klar5f+k1+sxGgzodLrMWqVWUVZcQndXBF9LC82hVkLhtkz0BUL4QmH8kQ6knpe7mZycIDmaYGQsyehYgrNnRxkcHqS7r5e4iOn3U0Inon2Y6z04gu24wkdpaj1KfaCVSqcPq8OLVUQpMTJMajfF/PI8SysLrK0tE+7uotBmJc9ixerxEh9NsvfODoOJhAA20RCM4GzpEMBj1PrDVDR6/pU0ODTA2uYqs/OzrK4u0dX/CkUVVt4cizMY60dfZkZjsnBp7hLxkSSmOheOln8y9LQdxxFqxyayq3T5saUzjA/HWd/eYPHyIrMLc6iLShiKRfn1my/57tP7LJxLoCgo5li0l+T4eAaYtuoKd2SgdYEwdk+QWl8LVe5mAUwMsZ7a5PLmOuPTkxSXm3l/Z4Xrq/N8cecG2xemKSgzUd7QyEBSWK5rovE/lu3e4POWh5JDbL2dYnV7i/FzE0y/dpKDe7f47L1rHDy4zfX5GdwuJ7oXTfSdPk25OFQXbMMZOY6rrZPa5kjmmVnIIqxLw6IpW7s7bF3Z5uSZM8yMDPD4o9v89vgRH1/b5cPUEj0dEbL1Btq7umlw+Qi3RAgGw5nYKkYnfe/1+Kl1pDMUwI2drUwdX+qLYjBb2F+f58kn97gRi7EyEMNWXYUs34gv0obD20yzmDuvJ4DP14zfH8Tt9uF0urGngel5S9dwaXWZplAIzREzp6In+OruPncXL9LpdaDIN5B7qJAqp4saXxibK5Cxaap3Y2pwY05LrMsbMsA4m8Lu1BuvU2avQV50hEg4wNcPbnJ1bgpfQzVyYyG5h0sw2e30x07R09+H2+9Hk6dDbzBmlKfPp9xsSjdlmL39PV4V8ygzFlBkq2ZJdPbbh3f4/OYV3hqOUVljR1Vqwmgyk5gYZWrmPD3RHhRyOVqNBo1ajVKppM5WjtTb30trZyeHxTCXVtVy8OgH/vjzL35++j0P73/AT09/JDkxjbK4FLmwLhfNUYoPW6ur0QjYs39fJaD1lRVIJRZxyXkBSaFEoTdyYWGNJ7/8zkrqXQrMNjau3mL0/EXR5XwUhkNkKdVIuUpyVOoM6BlUpUoDLYKjyydbk4dMrc1slLJkKA0FSPJcpGwZkkxOjoDliDrJdHqy1RqyxGG1yFarFXY12ueAfwMI7R5TjqqLSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"아직 안만듬\" title=\"아직 안만듬\" src=\"/static/76be29b979c9af3f9e5b015bf56e2524/0a47e/8.png\" srcset=\"/static/76be29b979c9af3f9e5b015bf56e2524/8a4e8/8.png 150w,\n/static/76be29b979c9af3f9e5b015bf56e2524/5a46d/8.png 300w,\n/static/76be29b979c9af3f9e5b015bf56e2524/0a47e/8.png 600w,\n/static/76be29b979c9af3f9e5b015bf56e2524/1cfc2/8.png 900w,\n/static/76be29b979c9af3f9e5b015bf56e2524/c1b63/8.png 1200w,\n/static/76be29b979c9af3f9e5b015bf56e2524/7831d/8.png 2116w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span><br/></p>\n<h2 id=\"16-웃는-얼굴을-분류-결과-state-만들기\" style=\"position:relative;\"><a href=\"#16-%EC%9B%83%EB%8A%94-%EC%96%BC%EA%B5%B4%EC%9D%84-%EB%B6%84%EB%A5%98-%EA%B2%B0%EA%B3%BC-state-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"16 웃는 얼굴을 분류 결과 state 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>16. 웃는 얼굴을 분류 결과 state 만들기</h2>\n<p>아래와 같이 <code class=\"language-text\">smileDetected</code>라는 <code class=\"language-text\">state</code>를 추가해준다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">hasPermission</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">cameraType</span><span class=\"token operator\">:</span> Camera<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Type<span class=\"token punctuation\">.</span>front<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">smileDetected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token operator\">...</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> hasPermission<span class=\"token punctuation\">,</span> cameraType<span class=\"token punctuation\">,</span> smileDetected <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n    <span class=\"token operator\">...</span></code></pre></div>\n<h2 id=\"17-웃는-얼굴을-찾았을-경우-감지-종료-시키기\" style=\"position:relative;\"><a href=\"#17-%EC%9B%83%EB%8A%94-%EC%96%BC%EA%B5%B4%EC%9D%84-%EC%B0%BE%EC%95%98%EC%9D%84-%EA%B2%BD%EC%9A%B0-%EA%B0%90%EC%A7%80-%EC%A2%85%EB%A3%8C-%EC%8B%9C%ED%82%A4%EA%B8%B0\" aria-label=\"17 웃는 얼굴을 찾았을 경우 감지 종료 시키기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>17. 웃는 얼굴을 찾았을 경우 감지 종료 시키기</h2>\n<p><code class=\"language-text\">Camera</code> 컴포넌트의 <code class=\"language-text\">onFacesDetected</code>를 아래와 같이 수정한다<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>Camera\n  style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> width <span class=\"token operator\">-</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> height <span class=\"token operator\">/</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  type<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>cameraType<span class=\"token punctuation\">}</span>\n  onFacesDetected<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>smileDetected <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onFacesDetected<span class=\"token punctuation\">}</span>\n  faceDetectionClassifications<span class=\"token operator\">=</span><span class=\"token string\">\"all\"</span>\n  FaceDetectorSettings<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">detectLandmarks</span><span class=\"token operator\">:</span> FaceDetector<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Landmarks<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">runClassifications</span><span class=\"token operator\">:</span> FaceDetector<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Classifications<span class=\"token punctuation\">.</span>all<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">smileDetected</code>가 <code class=\"language-text\">true</code>가 되면 <code class=\"language-text\">onFaceDetected</code>에 <code class=\"language-text\">null</code>이 들어가 중지된다.<br></p>\n<h2 id=\"18-웃는-얼굴을-찾았을-경우-state-변경하기\" style=\"position:relative;\"><a href=\"#18-%EC%9B%83%EB%8A%94-%EC%96%BC%EA%B5%B4%EC%9D%84-%EC%B0%BE%EC%95%98%EC%9D%84-%EA%B2%BD%EC%9A%B0-state-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0\" aria-label=\"18 웃는 얼굴을 찾았을 경우 state 변경하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>18. 웃는 얼굴을 찾았을 경우 state 변경하기</h2>\n<p><code class=\"language-text\">onFacesDetected</code>를 수정해 사용한다.<br>\n<code class=\"language-text\">faces</code>객체 내부의 <code class=\"language-text\">smilingProbability</code>에 따라 <code class=\"language-text\">state</code>를 변경하도록 한다.<br>\n아래와 같이 <code class=\"language-text\">JSON</code>을 <strong>Destructuring</strong>해서 필요한 부분만 가져온다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">onFacesDetected</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">faces</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">faces</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>face<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> faces\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>face<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>face<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>출력 결과는 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Object <span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"bottomMouthPosition\"</span><span class=\"token operator\">:</span> Object <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"x\"</span><span class=\"token operator\">:</span> <span class=\"token number\">356.0579520321626</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"y\"</span><span class=\"token operator\">:</span> <span class=\"token number\">205.984289517859</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token string-property property\">\"rightMouthPosition\"</span><span class=\"token operator\">:</span> Object <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"x\"</span><span class=\"token operator\">:</span> <span class=\"token number\">361.66983528473065</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"y\"</span><span class=\"token operator\">:</span> <span class=\"token number\">201.3538326735288</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token string-property property\">\"smilingProbability\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0.029783526435494423</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"yawAngle\"</span><span class=\"token operator\">:</span> <span class=\"token number\">34.714847564697266</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">Object</code>에서 필요한 <code class=\"language-text\">smilingProbability</code>를 사용해 함수를 작성한다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">onFacesDetected</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">faces</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">faces</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>face<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> faces\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>face<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>face<span class=\"token punctuation\">.</span>smilingProbability<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>face<span class=\"token punctuation\">.</span>smilingProbability <span class=\"token operator\">></span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">smileDetected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"작동-테스트-3\" style=\"position:relative;\"><a href=\"#%EC%9E%91%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8-3\" aria-label=\"작동 테스트 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작동 테스트</h3>\n<p><code class=\"language-text\">smilingProbability</code>가 <strong>낮은</strong> 사진에서는 얼굴을 계속 찾고있고<br>\n<code class=\"language-text\">smilingProbability</code>가 <strong>높은</strong> 사진에서는 <code class=\"language-text\">smileDetected</code>가 <code class=\"language-text\">true</code>가 되었고<br>\n얼굴을 더 이상 감지하지 않음을 확인할 수 있다.<br></p>\n<p><img src=\"/d930aa0574b73b261febaaa8d0d6e67d/9.gif\" width=\"300\" height=\"auto\" alt=\"아직 안만듬\"><br/></p>\n<h2 id=\"19-카메라를-작동해-사진-찍기\" style=\"position:relative;\"><a href=\"#19-%EC%B9%B4%EB%A9%94%EB%9D%BC%EB%A5%BC-%EC%9E%91%EB%8F%99%ED%95%B4-%EC%82%AC%EC%A7%84-%EC%B0%8D%EA%B8%B0\" aria-label=\"19 카메라를 작동해 사진 찍기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>19. 카메라를 작동해 사진 찍기</h2>\n<h3 id=\"카메라-reference-만들기\" style=\"position:relative;\"><a href=\"#%EC%B9%B4%EB%A9%94%EB%9D%BC-reference-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"카메라 reference 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>카메라 Reference 만들기</h3>\n<p><code class=\"language-text\">constructor</code>를 사용해 아래와 같이 코드를 작성한다.<br>\n<code class=\"language-text\">React</code>의 <code class=\"language-text\">createRef</code>를 이용해 <code class=\"language-text\">Reference</code>를 만들고 <code class=\"language-text\">Camera</code>에 전달한다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">hasPermission</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">cameraType</span><span class=\"token operator\">:</span> Camera<span class=\"token punctuation\">.</span>Constants<span class=\"token punctuation\">.</span>Type<span class=\"token punctuation\">.</span>front<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">smileDetected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameraRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token operator\">...</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> hasPermission<span class=\"token punctuation\">,</span> cameraType<span class=\"token punctuation\">,</span> smileDetected <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasPermission <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>CenterView<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>Camera\n                        <span class=\"token operator\">...</span>\n                        ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameraRef<span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n    <span class=\"token operator\">...</span></code></pre></div>\n<h3 id=\"사진을-찍는-함수-작성하기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A7%84%EC%9D%84-%EC%B0%8D%EB%8A%94-%ED%95%A8%EC%88%98-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"사진을 찍는 함수 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사진을 찍는 함수 작성하기</h3>\n<ol>\n<li><code class=\"language-text\">Camera</code>에 전달된 <code class=\"language-text\">ref</code>가 존재하는지 확인한다.</li>\n<li><code class=\"language-text\">takePictureAsync</code>함수를 사용해 사진을 찍는다.</li>\n<li>사진 객체를 <strong>Destructuring</strong>해 <code class=\"language-text\">uri</code>를 가져와 확인한다.</li>\n<li><code class=\"language-text\">uri</code>가 존재할 경우 <code class=\"language-text\">savePhoto</code>함수를 사용해 저장한다.</li>\n<li>에러가 발생할 경우 띄워주고 <strong>다시</strong> 얼굴을 찾도록 <code class=\"language-text\">state</code> 변경</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">takePhoto</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameraRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> uri <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cameraRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">takePictureAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">quality</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">savePhoto</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">smileDetected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"사진을-저장하는-함수-작성하기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A7%84%EC%9D%84-%EC%A0%80%EC%9E%A5%ED%95%98%EB%8A%94-%ED%95%A8%EC%88%98-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"사진을 저장하는 함수 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사진을 저장하는 함수 작성하기</h3>\n<p>찍은 사진의 <code class=\"language-text\">uri</code>는 저장하지 않으면 <strong>사라지기때문에</strong><br>\n사진을 <strong>저장하는 함수</strong>를 작성해 <strong>따로 저장</strong>해줘야한다.<br>\n<code class=\"language-text\">expo-media-library</code>모듈 추가 및 <strong>앨범 이름</strong>을 선언한다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> MediaLibrary <span class=\"token keyword\">from</span> <span class=\"token string\">\"expo-media-library\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ALBUM_NAME</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Smiley Cam\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>아래와 같이 <code class=\"language-text\">savePhoto</code>함수를 작성한다.<br></p>\n<ol>\n<li><code class=\"language-text\">askAsync</code>를 사용해 카메라 권한이 있는지 확인한다.</li>\n<li><code class=\"language-text\">createAssetAsync</code>를 사용해 <code class=\"language-text\">asset</code>생성한다.</li>\n<li><code class=\"language-text\">getAlbumAsync</code>를 사용해 선언한 앨범의 이름을 가져온다.</li>\n<li>앨범이 존재하지 않을 경우 <code class=\"language-text\">createAlbumAsync</code>를 사용해 생성 및 사진 저장</li>\n<li>앨범이 존재할 경우 <code class=\"language-text\">addAssetsToAlbumAsync</code>를 사용해 사진 저장</li>\n<li>2초 뒤 <code class=\"language-text\">smileDetected</code>를 <code class=\"language-text\">false</code>로 변경해 다시 사진 촬영 가능</li>\n<li>권한이 없을 경우 권한을 설정하도록 <code class=\"language-text\">hasPermission</code>을 <code class=\"language-text\">false</code>로 변경</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">savePhoto</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">uri</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> status <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Permissions<span class=\"token punctuation\">.</span><span class=\"token function\">askAsync</span><span class=\"token punctuation\">(</span>Permissions<span class=\"token punctuation\">.</span><span class=\"token constant\">CAMERA_ROLL</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'granted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> asset <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> MediaLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">createAssetAsync</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">let</span> album <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> MediaLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">getAlbumAsync</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ALBUM_NAME</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>album <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        album <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> MediaLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">createAlbumAsync</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ALBUM_NAME</span><span class=\"token punctuation\">,</span> asset<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> MediaLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">addAssetsToAlbumAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>asset<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> album<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">smileDetected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token number\">2000</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasPermission</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"작동-테스트-4\" style=\"position:relative;\"><a href=\"#%EC%9E%91%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8-4\" aria-label=\"작동 테스트 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작동 테스트</h3>\n<p><code class=\"language-text\">smilingProbability</code>가 <code class=\"language-text\">0.7</code>보다 커진 경우 사진이 찍혔으며<br>\n<strong>Smiley Cam</strong>폴더에 사진이 저장된 것을 확인할 수 있다.<br></p>\n<img src=\"/d3d5539dd5682dc6c0065792663be918/10.gif\" width=\"280\" height=\"auto\" alt=\"아직 안만듬\">\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 216.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAClElEQVRIx+1XTWsTQRje36a3tiqR0hYEBSvYkqgFBS/Bk6CHHlsQoQfxotCDYi4xJCkoNMQc0nw1asKmmg+TNN8fu7O72cd5J9lmzcU29eOSgYed992ZZ56ZWdjnlRhjyBcKyGazKBaLUFUVlPsdNE1Dt9sV8zIcci4HRVEg6RrDtyMZ6cMkZFkWSRpsTdJ1XcDq05MWpX6z2UQ8Hkc6fYjP6RTPc8J2j6GlmOgwwDRNPmGsoNPpoNFooNVqiT4R9Hq98YKclNrABNp8fk9hkL78YPiYUfHhq4puXwHjq5PKwWCATCaDYDCIQCCASCQi+pSjd6RSHA9XVWmqiBypOOaskj5ahRoptJ6T27VveRK6rmFgDMdK/X4foVAIe3t7SCaTCIfDSCQSJ+SnbTSeIFFQLldQqVZRrlRRq9XF7Z2VkI6BIEWjURwcRJFKxvk5fQLF52nS8vIVXHYsYGXxErY23dh86hY3aj/TMxGubWzgpnMdt9yP8eDZa+y+fUNU0yu8sbaO1TsuLLoe4rrjGu7ddp5vyxfn53Fhbg6rd+9j//k2HjldaPWU6bfscFzF0tIK3r3Ywf7uK7zc2kaH3/LUhPjDTbK+H+vDnEbV31U4I5wRzghnhDPCGeH/IjT/uULDMECwnIIVE8id2mNzYPB/OB9rGr/k7RCWuMrNpsfjQT6fF7aWDDkZdZ/Ph1KpxIl1mLqCRIFhYcfgfpo7dIN7cZUJE58blRTkuSVSQbY4Fotx91o78dHtdltY5Hq9znNcncHwva7hid+AfKyJWGXDEqNcLgsOmidZJYT9SaABBFKgjioDcvwd7sx0bVwc0Tuy0FYsTVZINMAqKbxerygp/H7/ELz/nueSqZQ4L6vqsgv5CWsMEYv1MCbdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"아직 안만듬\" title=\"아직 안만듬\" src=\"/static/f6e51b67663a2cee7d7e7b64f01ae883/0a47e/11.png\" srcset=\"/static/f6e51b67663a2cee7d7e7b64f01ae883/8a4e8/11.png 150w,\n/static/f6e51b67663a2cee7d7e7b64f01ae883/5a46d/11.png 300w,\n/static/f6e51b67663a2cee7d7e7b64f01ae883/0a47e/11.png 600w,\n/static/f6e51b67663a2cee7d7e7b64f01ae883/1cfc2/11.png 900w,\n/static/f6e51b67663a2cee7d7e7b64f01ae883/78797/11.png 1125w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span><br>\n<h4 id=\"아이유-짱짱걸\" style=\"position:relative;\"><a href=\"#%EC%95%84%EC%9D%B4%EC%9C%A0-%EC%A7%B1%EC%A7%B1%EA%B1%B8\" aria-label=\"아이유 짱짱걸 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><del>아이유 짱짱걸</del></h4>\n<p>지금까지 4개의 포스트에 거쳐 <code class=\"language-text\">React Native</code>에서 카메라를 사용해<br>\n<strong>웃는 얼굴</strong>이 감지된 경우 사진이 찍히는 어플리케이션을 제작해보았다.<br>\n자세한 코드는 <a href=\"https://github.com/alstn2468/ReactNative_For_Beginners/tree/master/smiley-cam\">여기</a>에서 확인할 수 있습니다.</p>","frontmatter":{"title":"React Native로 카메라 사용하기 (4)","date":"September 01, 2019","thumbnail":null}}},"pageContext":{"slug":"/ReactNative/2019-09-01-ReactNativeCameraPermissions4/","previous":{"fields":{"slug":"/ReactNative/2019-09-01-ReactNativeCameraPermissions3/"},"frontmatter":{"title":"React Native로 카메라 사용하기 (3)","category":"React Native","draft":false}},"next":{"fields":{"slug":"/Retrospective/2019-09-10-OneDayOneComitOneYear/"},"frontmatter":{"title":"1일 1커밋 1주년 회고","category":"Retrospective","draft":false}}}},"staticQueryHashes":["3001444076","3128451518"]}