{"componentChunkName":"component---src-templates-blog-post-js","path":"/Django/2020-06-01-Django-JWT-1","result":{"data":{"site":{"siteMetadata":{"title":"Minsu's Dev Log","author":"Minsu Kim","siteUrl":"https://alstn2468.github.io","comment":{"disqusShortName":"","utterances":"alstn2468/alstn2468.github.io"},"sponsor":{"buyMeACoffeeId":"eMLdEwU"}}},"markdownRemark":{"id":"26a3f71c-2df2-5882-b90e-ba5a37cc2184","excerpt":"JWT란? Json Web Token의 약자로 JSON 객체로 정보를 전달하는 방식이다.\n이 포스트에서는 JWT을 이용해 인증을 구현하는 방식을 다루어볼 것이다. JWT에 관해서 자세하게 알고 싶다면 아래의 링크를 확인하면 좋을 것이다. Velopert님 블로그 조대협님 블로그 필요한 패키지 설치하기 JWT인증을 구현하기위해 아래의 패키지 3개를 설치하였다. JWT인증을 구현하는 방법 에서 JWT…","html":"<h2 id=\"jwt란\" style=\"position:relative;\"><a href=\"#jwt%EB%9E%80\" aria-label=\"jwt란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT란?</h2>\n<p><strong>J</strong>son <strong>W</strong>eb <strong>T</strong>oken의 약자로 JSON 객체로 정보를 전달하는 방식이다.<br/>\n이 포스트에서는 <strong>JWT</strong>을 이용해 <strong>인증</strong>을 구현하는 방식을 다루어볼 것이다.<br/></p>\n<p><strong>JWT</strong>에 관해서 자세하게 알고 싶다면 아래의 링크를 확인하면 좋을 것이다.<br/></p>\n<ul>\n<li><a href=\"https://velopert.com/2389\">Velopert님 블로그</a></li>\n<li><a href=\"https://bcho.tistory.com/999\">조대협님 블로그</a></li>\n</ul>\n<h2 id=\"필요한-패키지-설치하기\" style=\"position:relative;\"><a href=\"#%ED%95%84%EC%9A%94%ED%95%9C-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"필요한 패키지 설치하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>필요한 패키지 설치하기</h2>\n<p>JWT인증을 구현하기위해 아래의 패키지 3개를 설치하였다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pip <span class=\"token function\">install</span> django\npip <span class=\"token function\">install</span> django-dotenv\npip <span class=\"token function\">install</span> pyjwt</code></pre></div>\n<h2 id=\"jwt인증을-구현하는-방법\" style=\"position:relative;\"><a href=\"#jwt%EC%9D%B8%EC%A6%9D%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"jwt인증을 구현하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT인증을 구현하는 방법</h2>\n<p><code class=\"language-text\">Django</code>에서 <strong>JWT</strong>를 구현하는 방법으로는 찾아본 결과로는 두가지가 있는 것 같다.</p>\n<ul>\n<li><code class=\"language-text\">middleware</code></li>\n<li><code class=\"language-text\">decorator</code></li>\n</ul>\n<p>위의 두가지 방법 중 이 포스트에서는 <code class=\"language-text\">middleware</code>를 이용해 구현해보도록 하겠다.<br/></p>\n<h2 id=\"미들웨어-훑어보기\" style=\"position:relative;\"><a href=\"#%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4-%ED%9B%91%EC%96%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"미들웨어 훑어보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>미들웨어 훑어보기</h2>\n<p><code class=\"language-text\">Django</code>공식문서에서는 <code class=\"language-text\">middleware</code>를 아래와 같이 정의하고있다.<br/></p>\n<blockquote>\n<p>미들웨어는 장고의 요청/응답 프로세싱의 중간에서 작업을 하는 가볍고 로우-레벨인 프레임워크이다.<br/>\n각각의 미들웨어는 각자의 특별한 역할을 수행한다.</p>\n</blockquote>\n<p>우리가 만들 <code class=\"language-text\">middleware</code>는 요청을 받으면 그 요청이 권한이 있는지 확인하는 <code class=\"language-text\">middleware</code>를 작성할 것이다.<br/></p>\n<h3 id=\"middleware-구조\" style=\"position:relative;\"><a href=\"#middleware-%EA%B5%AC%EC%A1%B0\" aria-label=\"middleware 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Middleware 구조</h3>\n<p><code class=\"language-text\">Django</code>의 <code class=\"language-text\">middleware</code>역시 <strong>함수형</strong>, <strong>클래스형</strong>이 존재한다.<br/></p>\n<ul>\n<li>함수형 <code class=\"language-text\">middleware</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">custom_middleware</span><span class=\"token punctuation\">(</span>get_response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">middleware</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        response <span class=\"token operator\">=</span> get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response\n\n    <span class=\"token keyword\">return</span> middleware</code></pre></div>\n<p><code class=\"language-text\">get_response</code>라는 인자를 받고 내부에 <code class=\"language-text\">middleware</code>함수가 작성된다.<br/>\n<code class=\"language-text\">middleware</code>함수의 <code class=\"language-text\">get_response</code>함수가 호출되는 부분을 기준으로<br/>\n<strong>위에는 요청이 실행되기전 아래는 요청이 실행된 후</strong> 로직을 작성하면 된다.<br/></p>\n<ul>\n<li>클래스형 <code class=\"language-text\">middleware</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> get_response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>get_response <span class=\"token operator\">=</span> get_response\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response</code></pre></div>\n<p>함수형과 동일하게 <code class=\"language-text\">get_response</code>를 클래스 생성자의 인자로 받는다.<br/>\n<code class=\"language-text\">__call__</code>함수의 <code class=\"language-text\">self.get_response</code>를 기준으로 위, 아래로 함수형과 동일하게 작성한다.<br/></p>\n<h3 id=\"middleware-등록하기\" style=\"position:relative;\"><a href=\"#middleware-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0\" aria-label=\"middleware 등록하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Middleware 등록하기</h3>\n<p><code class=\"language-text\">settings.py</code>에 있는 <code class=\"language-text\">MIDDLEWARE</code>리스트에 작성한 미들웨어를 등록하면된다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">MIDDLEWARE <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"django.middleware.security.SecurityMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"django.contrib.sessions.middleware.SessionMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"django.middleware.common.CommonMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"django.middleware.csrf.CsrfViewMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"django.contrib.auth.middleware.AuthenticationMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"django.contrib.messages.middleware.MessageMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"django.middleware.clickjacking.XFrameOptionsMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"corsheaders.middleware.CorsMiddleware\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"whitenoise.middleware.WhiteNoiseMiddleware\"</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"user.middleware.JsonWebTokenMiddleWare\"</span><span class=\"token punctuation\">,</span></span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>작성한 미들웨어는 <code class=\"language-text\">user</code>앱의 <code class=\"language-text\">middleware.py</code>에 <code class=\"language-text\">JsonWebTokenMiddleWare</code>클래스다.<br/>\n<code class=\"language-text\">MIDDLEWARE</code>리스트에 <code class=\"language-text\">&lt;app이름>.&lt;파일 이름>.&lt;클래스 or 함수 이름></code>과 같이 추가해주면된다.<br/></p>\n<h2 id=\"jwt-middleware-구현하기\" style=\"position:relative;\"><a href=\"#jwt-middleware-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"jwt middleware 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT Middleware 구현하기</h2>\n<p>본격적으로 <code class=\"language-text\">middleware</code>를 구현하기 전에 작성할 <code class=\"language-text\">middleware</code>가 처리할 일은 아래와 같다.<br/></p>\n<ul>\n<li>인증이 필요한 요청이 올때 토큰 확인하기</li>\n<li>토큰을 복호화하기</li>\n<li>복호화한 토큰의 내용이 유효한지 판단하기</li>\n</ul>\n<h3 id=\"환경변수-사용을-위한-설정하기\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"환경변수 사용을 위한 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경변수 사용을 위한 설정하기</h3>\n<p><code class=\"language-text\">manage.py</code>파일을 열어 아래와 같이 설정해 주어 <code class=\"language-text\">.env</code>파일을 읽도록 해준다.<br/>\n<code class=\"language-text\">.env</code>에는 암호화, 복호화 알고리즘과 비밀키를 넣어주면 된다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> sys\n<span class=\"token keyword\">import</span> dotenv\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    dotenv<span class=\"token punctuation\">.</span>read_dotenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"토큰-암호화-복호화-유틸-함수-작성\" style=\"position:relative;\"><a href=\"#%ED%86%A0%ED%81%B0-%EC%95%94%ED%98%B8%ED%99%94-%EB%B3%B5%ED%98%B8%ED%99%94-%EC%9C%A0%ED%8B%B8-%ED%95%A8%EC%88%98-%EC%9E%91%EC%84%B1\" aria-label=\"토큰 암호화 복호화 유틸 함수 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토큰 암호화, 복호화 유틸 함수 작성</h3>\n<p><code class=\"language-text\">Middleware</code>에서 <code class=\"language-text\">request</code>에 담긴 토큰을 복호화를 진행해야한다.<br/>\n<code class=\"language-text\">utils</code>폴더를 생성하고 <code class=\"language-text\">jwt.py</code>파일을 생성해 유틸 함수를 작성했다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> jwt\n\n\nJWT_ALGORITHM <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"JWT_ALGORITHM\"</span><span class=\"token punctuation\">)</span>\nSECRET_KEY <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"SECRET_KEY\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>환경변수에서 <code class=\"language-text\">JWT_ALGORITHM</code>과 <code class=\"language-text\">SECRET_KEY</code>를 가져와 전역으로 설정했다.<br/>\n<code class=\"language-text\">JWT_ALGORITHM</code>은 토큰을 암호화, 복호화할 때 사용하는 <strong>알고리즘</strong>이다.<br/>\n<code class=\"language-text\">SECRET_KEY</code>는 토큰을 암호화, 복호화할 때 사용하는 <strong>비밀키</strong>다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">encode_jwt</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> jwt<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> SECRET_KEY<span class=\"token punctuation\">,</span> algorithm<span class=\"token operator\">=</span>JWT_ALGORITHM<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">decode_jwt</span><span class=\"token punctuation\">(</span>access_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> jwt<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span>\n        access_token<span class=\"token punctuation\">,</span>\n        SECRET_KEY<span class=\"token punctuation\">,</span>\n        algorithms<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>JWT_ALGORITHM<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        issuer<span class=\"token operator\">=</span><span class=\"token string\">\"Redux Todo Web Backend\"</span><span class=\"token punctuation\">,</span>\n        options<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"verify_aud\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">jwt</code>패키지를 <code class=\"language-text\">import</code>하고 <code class=\"language-text\">jwt.encode</code>, <code class=\"language-text\">jwt.decode</code>함수를 사용해 암,복호화를 진행한다.<br/>\n<code class=\"language-text\">jwt.encode</code>를 한 결과는 <code class=\"language-text\">byte-string</code>이기 때문에 <code class=\"language-text\">decode(\"utf-8)</code>로 문자열로 변환한다.<br/>\n<code class=\"language-text\">issuer</code>나 <code class=\"language-text\">options</code>의 경우는 발행하는 토큰의 내용에 따라 수정하면 된다.<br/></p>\n<h3 id=\"인증-middleware-작성하기\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D-middleware-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"인증 middleware 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증 Middleware 작성하기</h3>\n<h4 id=\"1-필요한-패키지-추가하기\" style=\"position:relative;\"><a href=\"#1-%ED%95%84%EC%9A%94%ED%95%9C-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"1 필요한 패키지 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 필요한 패키지 추가하기</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> User\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> JsonResponse\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>exceptions <span class=\"token keyword\">import</span> PermissionDenied\n<span class=\"token keyword\">from</span> user<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>jwt <span class=\"token keyword\">import</span> decode_jwt\n<span class=\"token keyword\">from</span> jwt<span class=\"token punctuation\">.</span>exceptions <span class=\"token keyword\">import</span> ExpiredSignatureError\n<span class=\"token keyword\">from</span> http <span class=\"token keyword\">import</span> HTTPStatus</code></pre></div>\n<ul>\n<li><code class=\"language-text\">User</code> : 토큰을 복호화해 유효한 사용자임을 확인하기 위함</li>\n<li><code class=\"language-text\">JsonResponse</code>, <code class=\"language-text\">HTTPStatus</code> : 인증 실패시 Response를 반환하기 위함</li>\n<li><code class=\"language-text\">PermissionDenied</code> : 인증 실패 예외처리를 위함</li>\n<li><code class=\"language-text\">ExpiredSignatureError</code> : 만료된 토큰일 경우 예외처리를 위함</li>\n<li><code class=\"language-text\">deocde_jwt</code> : 요청으로 받은 토큰을 복호화 하기 위함</li>\n</ul>\n<h4 id=\"2-middleware-작성하기\" style=\"position:relative;\"><a href=\"#2-middleware-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"2 middleware 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Middleware 작성하기</h4>\n<ul>\n<li>클래스형 미들웨어 생성하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">JsonWebTokenMiddleWare</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> get_response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>get_response <span class=\"token operator\">=</span> get_response\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response</code></pre></div>\n<ul>\n<li>인증이 필요한 요청 <code class=\"language-text\">path</code>로 분기하기</li>\n</ul>\n<p>토큰을 포함하지 않아도 되는 요청을 <code class=\"language-text\">path</code>를 이용해 분기한다.<br/>\n<code class=\"language-text\">signup</code>과 <code class=\"language-text\">login</code>은 토큰을 발급받는 과정이기 때문에 인증 로직을 넘어간다.<br/>\n관리자 페이지를 이용하는 경우 <code class=\"language-text\">path</code>에 <code class=\"language-text\">admin</code>이 존재하는지 확인했다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">            request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/signup\"</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">and</span> request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/login\"</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">and</span> <span class=\"token string\">\"admin\"</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> request<span class=\"token punctuation\">.</span>path</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">pass</span></span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response</code></pre></div>\n<ul>\n<li>요청 헤더에서 인증 토큰 가져오기</li>\n</ul>\n<p><code class=\"language-text\">request</code>에서 <code class=\"language-text\">headers</code>를 가져온 후 <code class=\"language-text\">Authorization</code>을 가져와 <code class=\"language-text\">access_token</code>에 저장한다.<br/>\n<code class=\"language-text\">access_token</code>이 존재하지 않으면 <code class=\"language-text\">PermissionDenied</code>예외를 발생시킨다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n            request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/signup\"</span>\n            <span class=\"token keyword\">and</span> request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/login\"</span>\n            <span class=\"token keyword\">and</span> <span class=\"token string\">\"admin\"</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> request<span class=\"token punctuation\">.</span>path\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">            headers <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>headers</span><span class=\"gatsby-highlight-code-line\">            access_token <span class=\"token operator\">=</span> headers<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"Authorization\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> access_token<span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">raise</span> PermissionDenied<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response</code></pre></div>\n<ul>\n<li>인증 토큰 복호화해 유효성 검증하기</li>\n</ul>\n<p>유틸 함수로 구현했던 <code class=\"language-text\">decode_jwt</code>를 사용해 토큰을 복호화한다.<br/>\n토큰의 데이터는 <code class=\"language-text\">payload</code>에 저장하고 토큰을 발급받은 사람인 <code class=\"language-text\">aud</code>값을 가져온다.<br/>\n<code class=\"language-text\">aud</code>의 값이 없을 경우 <code class=\"language-text\">PermissionDenied</code> 예외를 발생시킨다.<br/>\n<code class=\"language-text\">aud</code>값이 저장된 <code class=\"language-text\">username</code>으로 <code class=\"language-text\">User</code>모델에서 해당 사용자가 존재하는지 확인한다.<br/>\n여기에서 사용자가 존재하지 않을 경우 <code class=\"language-text\">User.DoesNotExist</code> 예외가 발생한다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n            request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/signup\"</span>\n            <span class=\"token keyword\">and</span> request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/login\"</span>\n            <span class=\"token keyword\">and</span> <span class=\"token string\">\"admin\"</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> request<span class=\"token punctuation\">.</span>path\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            headers <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>headers\n            access_token <span class=\"token operator\">=</span> headers<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"Authorization\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> access_token<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> PermissionDenied<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\">            payload <span class=\"token operator\">=</span> decode_jwt<span class=\"token punctuation\">(</span>access_token<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            username <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"aud\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> username<span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">raise</span> PermissionDenied<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span></span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response</code></pre></div>\n<ul>\n<li>예외 처리 하기</li>\n</ul>\n<p>토큰이 존재하지 않거나, 유효하지 않은 사용자일 경우 <strong>UNAUTHORIZED (401)</strong>을 반환한다.<br/>\n이미 만료된 토큰일 경우 <strong>FORBIDDEN (403)</strong>을 반환한다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__call__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n            request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/signup\"</span>\n            <span class=\"token keyword\">and</span> request<span class=\"token punctuation\">.</span>path <span class=\"token operator\">!=</span> <span class=\"token string\">\"/login\"</span>\n            <span class=\"token keyword\">and</span> <span class=\"token string\">\"admin\"</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> request<span class=\"token punctuation\">.</span>path\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            headers <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>headers\n            access_token <span class=\"token operator\">=</span> headers<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"Authorization\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> access_token<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> PermissionDenied<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            payload <span class=\"token operator\">=</span> decode_jwt<span class=\"token punctuation\">(</span>access_token<span class=\"token punctuation\">)</span>\n\n            username <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"aud\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> username<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> PermissionDenied<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span>\n\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_response<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> response\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>PermissionDenied<span class=\"token punctuation\">,</span> User<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">{</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Authorization Error\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>HTTPStatus<span class=\"token punctuation\">.</span>UNAUTHORIZED</span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">except</span> ExpiredSignatureError<span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">{</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Expired token. Please log in again.\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            status<span class=\"token operator\">=</span>HTTPStatus<span class=\"token punctuation\">.</span>FORBIDDEN<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">)</span></span></code></pre></div>\n<h3 id=\"미들웨어-작동-확인하기\" style=\"position:relative;\"><a href=\"#%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4-%EC%9E%91%EB%8F%99-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"미들웨어 작동 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>미들웨어 작동 확인하기</h3>\n<ul>\n<li>토큰을 같이 보내지 않았을 경우 (<strong>401 UNAUTHORIZED</strong>)</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 38.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBElEQVQY01WRC3LEIAiGvf8tOj3O3mO3MW7jCxRQU0z21W/+YQTU+UWzbd6tq3NrCMF7Hw7iQfjgTDcfGMPXJX1fEqbNZCX4kqOI1FpfsbXWP9Diq8JzU+kFTEFknqmcUQQB1ILeyUSzeIh0/aQJN9aWmIRQtSfyUJMEEHPWNbf21nH+zZEavN14deLu4twpuF7hequLLT9LtVZVrNXHtDHU99RkRkOIUkoj6qo6I2UggKa79fEp9xB7TC2BIJKOhqr06aQLG2/ttrpgV4SsTvsYDyn7rofj/e70Q34XQqAUOSXpXa9ASEZ90ubJucE09rH/lxZFJ4eZIY1a9lJ2kbOlc/sD4J3OaR3dJKMAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1\" title=\"1\" src=\"/static/d55ce0b4802af4ea75f210023f47d899/0a47e/1.png\" srcset=\"/static/d55ce0b4802af4ea75f210023f47d899/8a4e8/1.png 150w,\n/static/d55ce0b4802af4ea75f210023f47d899/5a46d/1.png 300w,\n/static/d55ce0b4802af4ea75f210023f47d899/0a47e/1.png 600w,\n/static/d55ce0b4802af4ea75f210023f47d899/1cfc2/1.png 900w,\n/static/d55ce0b4802af4ea75f210023f47d899/c1b63/1.png 1200w,\n/static/d55ce0b4802af4ea75f210023f47d899/cc7de/1.png 1605w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<ul>\n<li>유효한 토큰일 경우 (<strong>200 OK</strong>)</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJklEQVQoz42QS27DMAxEdf879RJdNc6mDYoUTWzLkijxo1/pOEGKIAU6eAtCxFDkGOectXY8fS92DgDhIgBIzxRjKpxeP/FllzA4E2MkRE6piNSLSilElEW0qDcxc855q1srvVAVNh+HAxJJziyyQczzsmp731hbNxEx0lqY92GIzjGAxLihtZ8mCoEAMIQV7xlRclkH/ZL5etuJtc2HqjhfF1fs4o9HGkeeJh4nnmc+nfNsm+SKVO/LNwOa07J4a/V/wqRXbmjzSu/qSc5B8KR4RyULJY5g4vkcrU16oXPZu9bvriu9Nb3Pe423AjTEpuNq1RBMgVCzoN7M0gn7qvaM/tBa19Z4SmtR55Tamf42P6JLmTTs8zCgxjbs2zRevPU/Zk3mB/geRYcuS13yAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2\" title=\"2\" src=\"/static/5c33dba6e06d21d86d0e4f854c0b2089/0a47e/2.png\" srcset=\"/static/5c33dba6e06d21d86d0e4f854c0b2089/8a4e8/2.png 150w,\n/static/5c33dba6e06d21d86d0e4f854c0b2089/5a46d/2.png 300w,\n/static/5c33dba6e06d21d86d0e4f854c0b2089/0a47e/2.png 600w,\n/static/5c33dba6e06d21d86d0e4f854c0b2089/1cfc2/2.png 900w,\n/static/5c33dba6e06d21d86d0e4f854c0b2089/c1b63/2.png 1200w,\n/static/5c33dba6e06d21d86d0e4f854c0b2089/5f78c/2.png 1606w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<ul>\n<li>만료된 토큰일 경우 (<strong>403 FORBIDDEN</strong>)</li>\n</ul>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6UlEQVQY02WQYXKEIAyFuX8v1Rv0DP2DLlYkIIYghAYdt+v2m/AGSJi8oKxdpmkax8Ha2Tm3LIsoAPg7IQRRB56i//oOH5+rmWZFRIhbCr7sudTOflDv5Jyfl8y1MXFOyhgj7/cibyXbV0rp7C+bfCE1+YV+JFJaa0SkF+QoJkXzW/k/1MMY6caXPT4cegDJpSeHtW73jAsl3yB9kZI4LrVXlFLOCf9YIwJg8BgggSMZL6cdN+W1dsNg9eBGE8cHU+LGN1qrPmzzT7AmAxTnur1aEqLiNbQtcowsKvs9tw6/R//hU+t5I/wCCGbQTP7IMBAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3\" title=\"3\" src=\"/static/41fbd01e4f4623ef09400b143e26af00/0a47e/3.png\" srcset=\"/static/41fbd01e4f4623ef09400b143e26af00/8a4e8/3.png 150w,\n/static/41fbd01e4f4623ef09400b143e26af00/5a46d/3.png 300w,\n/static/41fbd01e4f4623ef09400b143e26af00/0a47e/3.png 600w,\n/static/41fbd01e4f4623ef09400b143e26af00/1cfc2/3.png 900w,\n/static/41fbd01e4f4623ef09400b143e26af00/c1b63/3.png 1200w,\n/static/41fbd01e4f4623ef09400b143e26af00/c3a47/3.png 1601w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>아직 디테일한 <strong>예외처리</strong>가 조금 부족하지만 잘 작동하는 것을 확인할 수 있다.<br/>\n실제 작성된 코드는 <a href=\"https://github.com/alstn2468/Redux_ToDo_Web_Backend/blob/master/user/middleware.py\">여기</a>에서 확인할 수 있다.<br/>\n이어지는 포스트에서는 <strong>JWT</strong>를 이용한 로그인을 구현해보도록 하겠다.</p>","frontmatter":{"title":"Pure Django로 JWT인증 구현하기 (1)","date":"June 01, 2020","thumbnail":null}}},"pageContext":{"slug":"/Django/2020-06-01-Django-JWT-1/","previous":{"fields":{"slug":"/Javascript/2020-05-18-IIFE-Modules-Namespaces/"},"frontmatter":{"title":"IIFE, Modules, Namespaces","category":"Javascript","draft":false}},"next":{"fields":{"slug":"/Django/2020-06-08-Django-JWT-2/"},"frontmatter":{"title":"Pure Django로 JWT인증 구현하기 (2)","category":"Django","draft":false}}}},"staticQueryHashes":["3001444076","3128451518"]}