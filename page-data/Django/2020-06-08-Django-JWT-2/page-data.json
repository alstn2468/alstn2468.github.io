{"componentChunkName":"component---src-templates-blog-post-js","path":"/Django/2020-06-08-Django-JWT-2","result":{"data":{"site":{"siteMetadata":{"title":"Minsu's Dev Log","author":"Minsu Kim","siteUrl":"https://alstn2468.github.io","comment":{"disqusShortName":"","utterances":"alstn2468/alstn2468.github.io"},"sponsor":{"buyMeACoffeeId":"eMLdEwU"}}},"markdownRemark":{"id":"c886c409-a15b-59ef-8975-4d2146e8e998","excerpt":"이전 포스트에서는 Django에서 JWT인증을 위한 미들웨어 작성법을 알아보았다.\n이번에는 를 사용하기 위한 인증 토큰을 발행하는 과정을 다루어보겠다.\n기본적으로 과  두 가지의 에서 토큰을 발행된다. URL 설정하기 인증과 관련된 로직을 처리하기 위한 앱을 새로만들었다.\n그 후 앞서 얘기했던 것과 같이 로그인과 회원가입에 필요한 두 을 설정한다.\n아직 구현하진 않았지만 호출할 view로 와 를 적어주었다. 앱의  프로젝트 폴더의 를 열어 작성한 앱의 를 추가해주었다. 프로젝트의  의 prefix…","html":"<p>이전 포스트에서는 <strong>Django</strong>에서 <strong>JWT</strong>인증을 위한 미들웨어 작성법을 알아보았다.<br/>\n이번에는 <code class=\"language-text\">middleware</code>를 사용하기 위한 <strong>인증 토큰을 발행</strong>하는 과정을 다루어보겠다.<br/>\n기본적으로 <code class=\"language-text\">/login</code>과 <code class=\"language-text\">/signup</code> 두 가지의 <code class=\"language-text\">path</code>에서 토큰을 발행된다.<br/></p>\n<h2 id=\"url-설정하기\" style=\"position:relative;\"><a href=\"#url-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"url 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>URL 설정하기</h2>\n<p><strong>인증</strong>과 관련된 로직을 처리하기 위한 <code class=\"language-text\">user</code>앱을 새로만들었다.<br/>\n그 후 앞서 얘기했던 것과 같이 로그인과 회원가입에 필요한 두 <code class=\"language-text\">URL</code>을 설정한다.<br/>\n아직 구현하진 않았지만 호출할 view로 <code class=\"language-text\">login_view</code>와 <code class=\"language-text\">signup_view</code>를 적어주었다.<br/></p>\n<ul>\n<li><code class=\"language-text\">user</code>앱의 <code class=\"language-text\">urls.py</code></li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n<span class=\"token keyword\">from</span> user<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> login_view<span class=\"token punctuation\">,</span> signup_view\n\napp_name <span class=\"token operator\">=</span> <span class=\"token string\">\"user\"</span>\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"login\"</span><span class=\"token punctuation\">,</span> login_view<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"login_view\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"signup\"</span><span class=\"token punctuation\">,</span> signup_view<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"signup_view\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>프로젝트 폴더의 <code class=\"language-text\">urls.py</code>를 열어 작성한 <code class=\"language-text\">user</code>앱의 <code class=\"language-text\">urls.py</code>를 추가해주었다.<br/></p>\n<ul>\n<li>프로젝트의 <code class=\"language-text\">urls.py</code></li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path<span class=\"token punctuation\">,</span> include\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span><span class=\"token string\">\"todo.urls\"</span><span class=\"token punctuation\">,</span> namespace<span class=\"token operator\">=</span><span class=\"token string\">\"todo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span><span class=\"token string\">\"user.urls\"</span><span class=\"token punctuation\">,</span> namespace<span class=\"token operator\">=</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span>    path<span class=\"token punctuation\">(</span><span class=\"token string\">\"admin/\"</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">URL</code>의 prefix가 모두 <code class=\"language-text\">\"\"</code>이기 때문에 각각 <code class=\"language-text\">/login</code>, <code class=\"language-text\">/signup</code>으로 연결된다.<br/></p>\n<h2 id=\"view구현을-위한-모듈-추가하기\" style=\"position:relative;\"><a href=\"#view%EA%B5%AC%ED%98%84%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%AA%A8%EB%93%88-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"view구현을 위한 모듈 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>View구현을 위한 모듈 추가하기</h2>\n<p>상당히 많은 모듈이 추가되었다.<br/>\n기본적으로 요청에 대한 <strong>반환</strong>과 <strong>예외처리</strong>, <strong>JWT인증</strong> 및 <strong>토큰 생성</strong>을 위한 모듈이다.<br/>\n자세한 내용은 모듈을 사용하면서 설명을 하겠다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> JsonResponse<span class=\"token punctuation\">,</span> HttpResponseNotAllowed\n<span class=\"token keyword\">from</span> http <span class=\"token keyword\">import</span> HTTPStatus\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> User\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>exceptions <span class=\"token keyword\">import</span> ValidationError\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> IntegrityError\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>views<span class=\"token punctuation\">.</span>decorators<span class=\"token punctuation\">.</span>csrf <span class=\"token keyword\">import</span> csrf_exempt\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>password_validation <span class=\"token keyword\">import</span> validate_password\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>validators <span class=\"token keyword\">import</span> ASCIIUsernameValidator\n<span class=\"token keyword\">from</span> user<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>jwt <span class=\"token keyword\">import</span> encode_jwt\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> timedelta\n<span class=\"token keyword\">from</span> json <span class=\"token keyword\">import</span> loads</code></pre></div>\n<h2 id=\"jwt-토큰-생성-함수-구현하기\" style=\"position:relative;\"><a href=\"#jwt-%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1-%ED%95%A8%EC%88%98-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"jwt 토큰 생성 함수 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JWT 토큰 생성 함수 구현하기</h2>\n<p>토큰 생성은 <code class=\"language-text\">utils</code>에 만들었던 <code class=\"language-text\">encode_jwt</code>함수를 통해서 진행한다.<br/>\n토큰에 들어가는 데이터에 관해 설명하면 아래와 같다.<br/></p>\n<ul>\n<li><code class=\"language-text\">iat</code> : 토큰 발행일</li>\n<li><code class=\"language-text\">exp</code> : 토큰 만료일 (토큰 발행일 + 7일)</li>\n<li><code class=\"language-text\">aud</code> : 토큰 발급자 (토큰을 발급한 사용자)</li>\n<li><code class=\"language-text\">iss</code> : 토근 발행자 (토큰을 발행한 주체)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">generate_access_token</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    iat <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    exp <span class=\"token operator\">=</span> iat <span class=\"token operator\">+</span> timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"iat\"</span><span class=\"token punctuation\">:</span> iat<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"exp\"</span><span class=\"token punctuation\">:</span> exp<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"aud\"</span><span class=\"token punctuation\">:</span> username<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"iss\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Redux Todo Web Backend\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> encode_jwt<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이렇게 발행된 <strong>JWT</strong>토큰을 로그인, 회원가입에 성공하면 반환해준다.<br/></p>\n<h2 id=\"로그인-view-구현하기\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-view-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"로그인 view 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 View 구현하기</h2>\n<h3 id=\"1-함수-선언-및-틀-작성하기\" style=\"position:relative;\"><a href=\"#1-%ED%95%A8%EC%88%98-%EC%84%A0%EC%96%B8-%EB%B0%8F-%ED%8B%80-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"1 함수 선언 및 틀 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 함수 선언 및 틀 작성하기</h3>\n<p><code class=\"language-text\">csrf</code>와 관련된 인증은 사용하지 않을 것이기 때문에<br/>\n<code class=\"language-text\">decorator</code>를 이용해 <code class=\"language-text\">csrf</code>인증을 사용하지 않음을 명시해주었다.<br/>\n기본적인 반환은 <code class=\"language-text\">JsonResponse</code>로 이루어지며 초기의 반환 데이터는<br/>\n비어있는 딕셔너리 <code class=\"language-text\">{}</code>와 상태 코드 <code class=\"language-text\">200 OK</code>다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@csrf_exempt</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">login_view</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>OK\n\n    <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"2-예외-처리-구문-추가하기\" style=\"position:relative;\"><a href=\"#2-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%EA%B5%AC%EB%AC%B8-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"2 예외 처리 구문 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 예외 처리 구문 추가하기</h3>\n<p><code class=\"language-text\">try-except</code>구문을 이용해 잘못된 요청이 왔을 경우 예외처리를 추가한다.<br/></p>\n<ul>\n<li><code class=\"language-text\">ValueError</code> : 사용자의 입력값이 잘못되었을 경우</li>\n<li><code class=\"language-text\">User.DoesNotExist</code> : 존재하지 않는 사용자일 경우</li>\n</ul>\n<p><code class=\"language-text\">ValueError</code>나 <code class=\"language-text\">User.DoesNotExist</code>예외가 발생할 경우 <code class=\"language-text\">400 BAD REQUEST</code>와<br/>\n<code class=\"language-text\">data</code>에 <code class=\"language-text\">error</code>라는 <code class=\"language-text\">key</code>로 에러메세지를 담아 반환한다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@csrf_exempt</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">login_view</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>OK\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">pass</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>ValueError<span class=\"token punctuation\">,</span> User<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">        data<span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Invalid form. Please fill it out again.\"</span></span><span class=\"gatsby-highlight-code-line\">        status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>BAD_REQUEST</span>\n    <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"3-허용되는-http-method만-처리하기\" style=\"position:relative;\"><a href=\"#3-%ED%97%88%EC%9A%A9%EB%90%98%EB%8A%94-http-method%EB%A7%8C-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"3 허용되는 http method만 처리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 허용되는 HTTP Method만 처리하기</h3>\n<p><code class=\"language-text\">login</code>기능은 <code class=\"language-text\">POST</code>메서드만을 사용해 처리가능하도록 구현하였다.<br/>\n간단하게 <code class=\"language-text\">request</code>의 <code class=\"language-text\">method</code>필드를 확인해 <code class=\"language-text\">\"POST\"</code>가 아닌 경우에는<br/>\n<code class=\"language-text\">405 Method Not Allowed</code>인 <code class=\"language-text\">HttpResponseNotAllowed</code>를 반환하도록 해주었다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@csrf_exempt</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">login_view</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>OK\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">pass</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">return</span> HttpResponseNotAllowed<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span>\n    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>ValueError<span class=\"token punctuation\">,</span> User<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data<span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Invalid form. Please fill it out again.\"</span>\n        status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>BAD_REQUEST\n\n    <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"4-request-데이터-가져오기\" style=\"position:relative;\"><a href=\"#4-request-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0\" aria-label=\"4 request 데이터 가져오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. request 데이터 가져오기</h3>\n<p><code class=\"language-text\">request</code>의 <code class=\"language-text\">body</code>값을 가져와 <code class=\"language-text\">json</code>을 <code class=\"language-text\">dict</code>형태로 변환해준다.<br/>\n그 후 <code class=\"language-text\">\"user\"</code>와 <code class=\"language-text\">\"password\"</code>값을 가져와 하나라도 없으면 <code class=\"language-text\">ValueError</code>를 발생시킨다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@csrf_exempt</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">login_view</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>OK\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">            json_body <span class=\"token operator\">=</span> loads<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            username <span class=\"token operator\">=</span> json_body<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">            password <span class=\"token operator\">=</span> json_body<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> username <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> password<span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponseNotAllowed<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>ValueError<span class=\"token punctuation\">,</span> User<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data<span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Invalid form. Please fill it out again.\"</span>\n        status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>BAD_REQUEST\n\n    <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"5-가져온-데이터로-사용자-확인하기\" style=\"position:relative;\"><a href=\"#5-%EA%B0%80%EC%A0%B8%EC%98%A8-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A1%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"5 가져온 데이터로 사용자 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 가져온 데이터로 사용자 확인하기</h3>\n<p><code class=\"language-text\">User</code>모델을 사용해 <code class=\"language-text\">username</code>값을 갖는 사용자가 있는지 확인한다.<br/>\n여기서 해당 사용자가 없을 경우 <code class=\"language-text\">User.DoesNotExist</code>예외가 발생한다.<br/>\n해당 <code class=\"language-text\">username</code>을 갖는 사용자가 있을 경우 <code class=\"language-text\">user</code>객체의 <code class=\"language-text\">check_password</code>를 이용해<br/>\n해당 사용자의 비밀번호가 유효한 비밀번호인지 판단하게 된다.<br/>\n요청을 받은 비밀번호가 잘못된 비밀번호 일 경우 <code class=\"language-text\">ValueError</code>예외가 발생한다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@csrf_exempt</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">login_view</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>OK\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">:</span>\n            json_body <span class=\"token operator\">=</span> loads<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n\n            username <span class=\"token operator\">=</span> json_body<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n            password <span class=\"token operator\">=</span> json_body<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> username <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> password<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\">            user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> user<span class=\"token punctuation\">.</span>check_password<span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">                <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponseNotAllowed<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>ValueError<span class=\"token punctuation\">,</span> User<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data<span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Invalid form. Please fill it out again.\"</span>\n        status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>BAD_REQUEST\n\n    <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"6-jwt-토큰-발행-및-응답하기\" style=\"position:relative;\"><a href=\"#6-jwt-%ED%86%A0%ED%81%B0-%EB%B0%9C%ED%96%89-%EB%B0%8F-%EC%9D%91%EB%8B%B5%ED%95%98%EA%B8%B0\" aria-label=\"6 jwt 토큰 발행 및 응답하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. JWT 토큰 발행 및 응답하기</h3>\n<p>5번의 과정까지 모두 정상적으로 통과했다면 유효한 사용자임을 확인한 것이다.<br/>\n<code class=\"language-text\">generate_access_token</code>함수에 <code class=\"language-text\">username</code>을 전달해 토큰을 생성하였다.<br/>\n그 후 <code class=\"language-text\">JsonResponse</code>의 데이터로 보낼 <code class=\"language-text\">data</code> 딕셔너리에 <code class=\"language-text\">access_token</code>이라는<br/>\n<code class=\"language-text\">key</code>으로 <strong>JWT 토큰</strong>을 넣어주고 사용자 이름을 <code class=\"language-text\">user</code>라는 <code class=\"language-text\">key</code>로 넣어준다.<br/></p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@csrf_exempt</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">login_view</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>OK\n\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">:</span>\n            json_body <span class=\"token operator\">=</span> loads<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span>\n\n            username <span class=\"token operator\">=</span> json_body<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n            password <span class=\"token operator\">=</span> json_body<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> username <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> password<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> user<span class=\"token punctuation\">.</span>check_password<span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> ValueError<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\">            data<span class=\"token punctuation\">[</span><span class=\"token string\">\"access_token\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> generate_access_token<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">            data<span class=\"token punctuation\">[</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> username</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> HttpResponseNotAllowed<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>ValueError<span class=\"token punctuation\">,</span> User<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data<span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Invalid form. Please fill it out again.\"</span>\n        status <span class=\"token operator\">=</span> HTTPStatus<span class=\"token punctuation\">.</span>BAD_REQUEST\n\n    <span class=\"token keyword\">return</span> JsonResponse<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"view-작동-테스트\" style=\"position:relative;\"><a href=\"#view-%EC%9E%91%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"view 작동 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>View 작동 테스트</h2>\n<h3 id=\"로그인-기능-작동-확인하기\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B8%B0%EB%8A%A5-%EC%9E%91%EB%8F%99-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"로그인 기능 작동 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 기능 작동 확인하기</h3>\n<p><code class=\"language-text\">Postman</code>을 이용해 작성한 <code class=\"language-text\">View</code>가 잘 동작하는지 확인해보겠다.<br/>\n테스트를 위해 <code class=\"language-text\">username</code>은 <code class=\"language-text\">login_test</code>로 <code class=\"language-text\">password</code>는 <code class=\"language-text\">1234</code>로 계정을 생성했다.<br/></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 522px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA3klEQVQY01WRSQ6EMAwE+QWQsK9i3+HG/3/lmbIEmjm04mCr0m2cYRhknmfp+172fX/rcRy1XpZF2rbVO2qaRvvrukrXdVIUhZRlKdYa8X1fnOu65DxPhTEYx7EqCAKJouhPfDPGaM2MtVZc1xXP8xRGz9m27Qs81AUv5nmuTYY5gaAwROHPPXwfon6BRCA2DqdpUnBd1xoVeJZleiKiJUkiVVVJmqY6h+gB08jsicj3fSsU0HEc+o11sDeggBA1cQHiDsjjToEAngXjEACOn5+AGxyw/MclUE6ggH71AXd6q/pSPs/nAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"1\" title=\"1\" src=\"/static/41e3771de9094042a8db0c343ec94855/29492/1.png\" srcset=\"/static/41e3771de9094042a8db0c343ec94855/8a4e8/1.png 150w,\n/static/41e3771de9094042a8db0c343ec94855/5a46d/1.png 300w,\n/static/41e3771de9094042a8db0c343ec94855/29492/1.png 522w\" sizes=\"(max-width: 522px) 100vw, 522px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>이제 <code class=\"language-text\">Postman</code>을 이용해 요청을 보내보도록 하겠다.<br/></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABqUlEQVQoz5VS246bMBDl/39uX1ipD11FgRDCHWxuxsanc0zI7laV2loaxh7bcy4mqusaaZqiKAq0bYumaVBVFZRS2LYN67pimqYQ8zxDa41xHLEsS9jb9/1bRFmWIY5jXK/X0KgsywDQ9z26rgMB2ZzrYRjCmUpqvMcah/c+hHwQEdUY80I/mZABEZ1zgSnzi4n7rFtr4RibC30isqBconGTbMiS0h+PR6jzIu3I8zwwvvcFKtXAbhaFnM3ud1za29GQTNiEmQ2Z6RGZkjHZkhUzJQc/jaiwBrvuoH/GGD7eUX+8wck6Ohsw2JBZPS8S6Ksd5wNpdQApYT+pAX1Tw1uHKU8Q8RAPE92KL7MAnF4qObyuS2g6zQco9/RTQVhL0LZNVExdfTwKC9wMZou5uzSWKcwK8c8Lcy/z50uGV/182bNGWzgLktmUw84GZZxA5w1UNSK7WNwuwOUHMLQOfnf48/CvHCVJgvSWoeyF6eiQpwOKXKMsRvTThrzyuD08lPEYlr9HdPywClrYGSEgCmEYInm1st5Fssha7b9FFH5M575Q/z3+b/wCnZGh11qEshcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2\" title=\"2\" src=\"/static/cb60da60602c807d25d1c09f54b76d30/f5eb6/2.png\" srcset=\"/static/cb60da60602c807d25d1c09f54b76d30/8a4e8/2.png 150w,\n/static/cb60da60602c807d25d1c09f54b76d30/5a46d/2.png 300w,\n/static/cb60da60602c807d25d1c09f54b76d30/f5eb6/2.png 359w\" sizes=\"(max-width: 359px) 100vw, 359px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>위와 같이 로그인을 할 데이터를 <code class=\"language-text\">body</code>에 담아보냈다.<br/></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOUlEQVQoz6WS20rFMBBF84n+gd/mmz/kq6BwaG3TS5qmuXe7py14DvggGFjs6WTI3Kr6rsM4TdCDRte1aJoGbdtiom8cx18ZiDMj3j5nPL0YPL8ueL/1WOYRynuP4DzcErHailLKRT2p977y46vn/U6tdzHKLJYPRSwmYV52hPw/lLz629n3neDPZ79Q3jnEGBFCQLg0pYR6tZBzfsAHj42I+njaiWRnUWKA0s0NwzBwMRw20VrDmBnWWs51RmaQVFuvWUmymCNSPjWmyOQJgbGbXaDctsG5lRuaicHKiu16stH2UnnKhA9QE6s89LClg3Ko5/fGBasqsyoZfT/ho53wNa7oZ4eO9GaDNg4D6afLTxXE50Jk24ltx8OWZEpKTlHKPrMfS9r5OxyUSx+R+1JkpumgEPGL/Q15ebvr0N9cjgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"3\" title=\"3\" src=\"/static/414adfd74740b6c2f7029409c63a7b37/0a47e/3.png\" srcset=\"/static/414adfd74740b6c2f7029409c63a7b37/8a4e8/3.png 150w,\n/static/414adfd74740b6c2f7029409c63a7b37/5a46d/3.png 300w,\n/static/414adfd74740b6c2f7029409c63a7b37/0a47e/3.png 600w,\n/static/414adfd74740b6c2f7029409c63a7b37/1cfc2/3.png 900w,\n/static/414adfd74740b6c2f7029409c63a7b37/6bff2/3.png 957w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p><code class=\"language-text\">access_token</code>과 <code class=\"language-text\">user</code>데이터가 잘 반환되는 것을 확인할 수 있다.<br/></p>\n<h3 id=\"예외-처리-확인하기\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"예외 처리 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예외 처리 확인하기</h3>\n<p>존재하지 않는 사용자를 넣어 예외 처리가 잘 되는지 확인해보자.<br/></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHUlEQVQoz5WRW1LDMAxFvUB2wp5YAkthDXwwpW3qOH6/ZF9kJzB8lM7gzIk8inUl34hlWaCUglxvuF7PuFw+mcvMKbXeRa4K0a54e9d4etF4fjU4nRcYvUFoY+BshN4itq3C2AIfC2KuD0mMTxXSEZQnhLTnhfMeyWc4U8DaiLGjEtPwB/0AII6t73znRGv8vrv6wf+WCCEg54yUEl9jxIxSCkYjosbTEmqtk3HGJc8EPpsmIUeUFEHegkqGkKcPSCmxrsNsyfsbNJtrrUUwGpWLdnGajUKJiCXN/SCxSKvsueYf5R2E5wndKHYO2vofjAvsqZsTd36GaGevcNB/w1ct3DDEyB72hkYVvRGb3Cb1iIX2yB+58DHDb2KdLzkJb0dcUU56AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"4\" title=\"4\" src=\"/static/ea926025bd6ac1b15ebc65f933b2ea92/0a47e/4.png\" srcset=\"/static/ea926025bd6ac1b15ebc65f933b2ea92/8a4e8/4.png 150w,\n/static/ea926025bd6ac1b15ebc65f933b2ea92/5a46d/4.png 300w,\n/static/ea926025bd6ac1b15ebc65f933b2ea92/0a47e/4.png 600w,\n/static/ea926025bd6ac1b15ebc65f933b2ea92/1cfc2/4.png 900w,\n/static/ea926025bd6ac1b15ebc65f933b2ea92/d7abb/4.png 959w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>존재하지 않는 사용자로 요청시 <code class=\"language-text\">400 BAD REQUEST</code>가 반환되는 것을 볼 수 있다.<br/></p>\n<p>허용되지 않는 메서드를 사용해 요청을 보내보자.<br/></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABFElEQVQoz5WQDU7EIBCFOaK38FpewMN4BKNxu9qFQgsMP+X5aHc3Gv8iyZcZBobhPWWMgZsdjNF4fR0wDAccjwMm1nvNXKO+7rU2CE7j4dHi5s7i9t7h6fAGZyco62Ysc4SbIqYpw8eMIBkxlV8R4qVA+wpDguw1tXiP6BMWl+EcUGpDXRl/pJ0B7zWsbWfrYa9aV2bfrnbmf0uFEJBSgkhCyozMcy7ogyoptaIUyhGhxIBFPOUF3hNKjwgkS0T1Mypranx5xng64URGTcaRXk6U7zBbixTD9njO9DXLhpC+3z5AauGZNbRugeqTY4zbD6THS05Sn8yGRo9aozWMF9oH+spU0Yeoz5599a9hf+wvgD2+A9KUcAG6vmJFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"5\" title=\"5\" src=\"/static/52b32b5c42d11b4c99cfe786225ac716/0a47e/5.png\" srcset=\"/static/52b32b5c42d11b4c99cfe786225ac716/8a4e8/5.png 150w,\n/static/52b32b5c42d11b4c99cfe786225ac716/5a46d/5.png 300w,\n/static/52b32b5c42d11b4c99cfe786225ac716/0a47e/5.png 600w,\n/static/52b32b5c42d11b4c99cfe786225ac716/1cfc2/5.png 900w,\n/static/52b32b5c42d11b4c99cfe786225ac716/e4a12/5.png 963w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p><code class=\"language-text\">PUT</code>로 요청을 보내니 <code class=\"language-text\">405 METHOD NOT ALLOWED</code>가 반환되는 것을 볼 수 있다.<br/></p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>그렇게 길지 않은 코드로 <strong>JWT 토큰</strong>을 발행하는 로그인 기능을 구현하였다.<br/>\n다음 포스트에서는 <strong>JWT</strong>토큰을 발행하는 회원가입을 구현해보도록 하겠다.<br/>\n추가적으로는 발행한 토큰을 이용해 데이터를 반환하는 과정또한 다루어 보도록하겠다.<br/>\n실제 작성된 코드는 <a href=\"https://github.com/alstn2468/Redux_ToDo_Web_Backend/blob/master/user/views.py\">여기</a>에서 확인할 수 있다.<br/></p>\n<blockquote>\n<p>질문과 오타, 문제점 제보는 환영입니다.</p>\n</blockquote>","frontmatter":{"title":"Pure Django로 JWT인증 구현하기 (2)","date":"June 08, 2020","thumbnail":null}}},"pageContext":{"slug":"/Django/2020-06-08-Django-JWT-2/","previous":{"fields":{"slug":"/Django/2020-06-01-Django-JWT-1/"},"frontmatter":{"title":"Pure Django로 JWT인증 구현하기 (1)","category":"Django","draft":false}},"next":{"fields":{"slug":"/Javascript/2020-06-24-Messag_Queue_Event_Loop/"},"frontmatter":{"title":"메시지 큐와 이벤트 루프","category":"Javascript","draft":false}}}},"staticQueryHashes":["3001444076","3128451518"]}